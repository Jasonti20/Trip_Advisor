{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { resolveDirective as _resolveDirective, createVNode as _createVNode } from \"vue\";\nimport { useRafState } from '../hooks/useRaf';\nimport TabNode from './TabNode';\nimport useOffsets from '../hooks/useOffsets';\nimport OperationNode from './OperationNode';\nimport { useInjectTabs } from '../TabContext';\nimport useTouchMove from '../hooks/useTouchMove';\nimport AddButton from './AddButton';\nimport { onBeforeUnmount, defineComponent, ref, watch, watchEffect, computed } from 'vue';\nimport PropTypes from '../../../_util/vue-types';\nimport useSyncState from '../hooks/useSyncState';\nimport useState from '../../../_util/hooks/useState';\nimport raf from '../../../_util/raf';\nimport classNames from '../../../_util/classNames';\nimport ResizeObserver from '../../../vc-resize-observer';\nimport { toPx } from '../../../_util/util';\nimport useRefs from '../../../_util/hooks/useRefs';\nimport pick from 'lodash-es/pick';\nvar DEFAULT_SIZE = {\n  width: 0,\n  height: 0,\n  left: 0,\n  top: 0,\n  right: 0\n};\nexport var tabNavListProps = function tabNavListProps() {\n  return {\n    id: {\n      type: String\n    },\n    tabPosition: {\n      type: String\n    },\n    activeKey: {\n      type: [String, Number]\n    },\n    rtl: {\n      type: Boolean\n    },\n    animated: {\n      type: Object,\n      default: undefined\n    },\n    editable: {\n      type: Object\n    },\n    moreIcon: PropTypes.any,\n    moreTransitionName: {\n      type: String\n    },\n    mobile: {\n      type: Boolean\n    },\n    tabBarGutter: {\n      type: Number\n    },\n    renderTabBar: {\n      type: Function\n    },\n    locale: {\n      type: Object,\n      default: undefined\n    },\n    onTabClick: {\n      type: Function\n    },\n    onTabScroll: {\n      type: Function\n    }\n  };\n};\nexport default defineComponent({\n  compatConfig: {\n    MODE: 3\n  },\n  name: 'TabNavList',\n  inheritAttrs: false,\n  props: tabNavListProps(),\n  slots: ['moreIcon', 'leftExtra', 'rightExtra', 'tabBarExtraContent'],\n  emits: ['tabClick', 'tabScroll'],\n  setup: function setup(props, _ref) {\n    var attrs = _ref.attrs,\n        slots = _ref.slots;\n\n    var _useInjectTabs = useInjectTabs(),\n        tabs = _useInjectTabs.tabs,\n        prefixCls = _useInjectTabs.prefixCls;\n\n    var tabsWrapperRef = ref();\n    var tabListRef = ref();\n    var operationsRef = ref();\n    var innerAddButtonRef = ref();\n\n    var _useRefs = useRefs(),\n        _useRefs2 = _slicedToArray(_useRefs, 2),\n        setRef = _useRefs2[0],\n        btnRefs = _useRefs2[1];\n\n    var tabPositionTopOrBottom = computed(function () {\n      return props.tabPosition === 'top' || props.tabPosition === 'bottom';\n    });\n\n    var _useSyncState = useSyncState(0, function (next, prev) {\n      if (tabPositionTopOrBottom.value && props.onTabScroll) {\n        props.onTabScroll({\n          direction: next > prev ? 'left' : 'right'\n        });\n      }\n    }),\n        _useSyncState2 = _slicedToArray(_useSyncState, 2),\n        transformLeft = _useSyncState2[0],\n        setTransformLeft = _useSyncState2[1];\n\n    var _useSyncState3 = useSyncState(0, function (next, prev) {\n      if (!tabPositionTopOrBottom.value && props.onTabScroll) {\n        props.onTabScroll({\n          direction: next > prev ? 'top' : 'bottom'\n        });\n      }\n    }),\n        _useSyncState4 = _slicedToArray(_useSyncState3, 2),\n        transformTop = _useSyncState4[0],\n        setTransformTop = _useSyncState4[1];\n\n    var _useState = useState(0),\n        _useState2 = _slicedToArray(_useState, 2),\n        wrapperScrollWidth = _useState2[0],\n        setWrapperScrollWidth = _useState2[1];\n\n    var _useState3 = useState(0),\n        _useState4 = _slicedToArray(_useState3, 2),\n        wrapperScrollHeight = _useState4[0],\n        setWrapperScrollHeight = _useState4[1];\n\n    var _useState5 = useState(null),\n        _useState6 = _slicedToArray(_useState5, 2),\n        wrapperWidth = _useState6[0],\n        setWrapperWidth = _useState6[1];\n\n    var _useState7 = useState(null),\n        _useState8 = _slicedToArray(_useState7, 2),\n        wrapperHeight = _useState8[0],\n        setWrapperHeight = _useState8[1];\n\n    var _useState9 = useState(0),\n        _useState10 = _slicedToArray(_useState9, 2),\n        addWidth = _useState10[0],\n        setAddWidth = _useState10[1];\n\n    var _useState11 = useState(0),\n        _useState12 = _slicedToArray(_useState11, 2),\n        addHeight = _useState12[0],\n        setAddHeight = _useState12[1];\n\n    var _useRafState = useRafState(new Map()),\n        _useRafState2 = _slicedToArray(_useRafState, 2),\n        tabSizes = _useRafState2[0],\n        setTabSizes = _useRafState2[1];\n\n    var tabOffsets = useOffsets(tabs, tabSizes); // ========================== Util =========================\n\n    var operationsHiddenClassName = computed(function () {\n      return \"\".concat(prefixCls.value, \"-nav-operations-hidden\");\n    });\n    var transformMin = ref(0);\n    var transformMax = ref(0);\n    watchEffect(function () {\n      if (!tabPositionTopOrBottom.value) {\n        transformMin.value = Math.min(0, wrapperHeight.value - wrapperScrollHeight.value);\n        transformMax.value = 0;\n      } else if (props.rtl) {\n        transformMin.value = 0;\n        transformMax.value = Math.max(0, wrapperScrollWidth.value - wrapperWidth.value);\n      } else {\n        transformMin.value = Math.min(0, wrapperWidth.value - wrapperScrollWidth.value);\n        transformMax.value = 0;\n      }\n    });\n\n    var alignInRange = function alignInRange(value) {\n      if (value < transformMin.value) {\n        return transformMin.value;\n      }\n\n      if (value > transformMax.value) {\n        return transformMax.value;\n      }\n\n      return value;\n    }; // ========================= Mobile ========================\n\n\n    var touchMovingRef = ref();\n\n    var _useState13 = useState(),\n        _useState14 = _slicedToArray(_useState13, 2),\n        lockAnimation = _useState14[0],\n        setLockAnimation = _useState14[1];\n\n    var doLockAnimation = function doLockAnimation() {\n      setLockAnimation(Date.now());\n    };\n\n    var clearTouchMoving = function clearTouchMoving() {\n      clearTimeout(touchMovingRef.value);\n    };\n\n    var doMove = function doMove(setState, offset) {\n      setState(function (value) {\n        var newValue = alignInRange(value + offset);\n        return newValue;\n      });\n    };\n\n    useTouchMove(tabsWrapperRef, function (offsetX, offsetY) {\n      if (tabPositionTopOrBottom.value) {\n        // Skip scroll if place is enough\n        if (wrapperWidth.value >= wrapperScrollWidth.value) {\n          return false;\n        }\n\n        doMove(setTransformLeft, offsetX);\n      } else {\n        if (wrapperHeight.value >= wrapperScrollHeight.value) {\n          return false;\n        }\n\n        doMove(setTransformTop, offsetY);\n      }\n\n      clearTouchMoving();\n      doLockAnimation();\n      return true;\n    });\n    watch(lockAnimation, function () {\n      clearTouchMoving();\n\n      if (lockAnimation.value) {\n        touchMovingRef.value = setTimeout(function () {\n          setLockAnimation(0);\n        }, 100);\n      }\n    }); // ========================= Scroll ========================\n\n    var scrollToTab = function scrollToTab() {\n      var key = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : props.activeKey;\n      var tabOffset = tabOffsets.value.get(key) || {\n        width: 0,\n        height: 0,\n        left: 0,\n        right: 0,\n        top: 0\n      };\n\n      if (tabPositionTopOrBottom.value) {\n        // ============ Align with top & bottom ============\n        var newTransform = transformLeft.value; // RTL\n\n        if (props.rtl) {\n          if (tabOffset.right < transformLeft.value) {\n            newTransform = tabOffset.right;\n          } else if (tabOffset.right + tabOffset.width > transformLeft.value + wrapperWidth.value) {\n            newTransform = tabOffset.right + tabOffset.width - wrapperWidth.value;\n          }\n        } // LTR\n        else if (tabOffset.left < -transformLeft.value) {\n          newTransform = -tabOffset.left;\n        } else if (tabOffset.left + tabOffset.width > -transformLeft.value + wrapperWidth.value) {\n          newTransform = -(tabOffset.left + tabOffset.width - wrapperWidth.value);\n        }\n\n        setTransformTop(0);\n        setTransformLeft(alignInRange(newTransform));\n      } else {\n        // ============ Align with left & right ============\n        var _newTransform = transformTop.value;\n\n        if (tabOffset.top < -transformTop.value) {\n          _newTransform = -tabOffset.top;\n        } else if (tabOffset.top + tabOffset.height > -transformTop.value + wrapperHeight.value) {\n          _newTransform = -(tabOffset.top + tabOffset.height - wrapperHeight.value);\n        }\n\n        setTransformLeft(0);\n        setTransformTop(alignInRange(_newTransform));\n      }\n    };\n\n    var visibleStart = ref(0);\n    var visibleEnd = ref(0);\n    watchEffect(function () {\n      var _ref3;\n\n      var unit;\n      var position;\n      var transformSize;\n      var basicSize;\n      var tabContentSize;\n      var addSize;\n      var tabOffsetsValue = tabOffsets.value;\n\n      if (['top', 'bottom'].includes(props.tabPosition)) {\n        unit = 'width';\n        basicSize = wrapperWidth.value;\n        tabContentSize = wrapperScrollWidth.value;\n        addSize = addWidth.value;\n        position = props.rtl ? 'right' : 'left';\n        transformSize = Math.abs(transformLeft.value);\n      } else {\n        unit = 'height';\n        basicSize = wrapperHeight.value;\n        tabContentSize = wrapperScrollWidth.value;\n        addSize = addHeight.value;\n        position = 'top';\n        transformSize = -transformTop.value;\n      }\n\n      var mergedBasicSize = basicSize;\n\n      if (tabContentSize + addSize > basicSize && tabContentSize < basicSize) {\n        mergedBasicSize = basicSize - addSize;\n      }\n\n      var tabsVal = tabs.value;\n\n      if (!tabsVal.length) {\n        var _ref2;\n\n        return _ref2 = [0, 0], visibleStart.value = _ref2[0], visibleEnd.value = _ref2[1], _ref2;\n      }\n\n      var len = tabsVal.length;\n      var endIndex = len;\n\n      for (var i = 0; i < len; i += 1) {\n        var offset = tabOffsetsValue.get(tabsVal[i].key) || DEFAULT_SIZE;\n\n        if (offset[position] + offset[unit] > transformSize + mergedBasicSize) {\n          endIndex = i - 1;\n          break;\n        }\n      }\n\n      var startIndex = 0;\n\n      for (var _i = len - 1; _i >= 0; _i -= 1) {\n        var _offset = tabOffsetsValue.get(tabsVal[_i].key) || DEFAULT_SIZE;\n\n        if (_offset[position] < transformSize) {\n          startIndex = _i + 1;\n          break;\n        }\n      }\n\n      return _ref3 = [startIndex, endIndex], visibleStart.value = _ref3[0], visibleEnd.value = _ref3[1], _ref3;\n    });\n\n    var onListHolderResize = function onListHolderResize() {\n      var _tabsWrapperRef$value, _tabsWrapperRef$value2, _innerAddButtonRef$va, _tabListRef$value, _tabListRef$value2; // Update wrapper records\n\n\n      var offsetWidth = ((_tabsWrapperRef$value = tabsWrapperRef.value) === null || _tabsWrapperRef$value === void 0 ? void 0 : _tabsWrapperRef$value.offsetWidth) || 0;\n      var offsetHeight = ((_tabsWrapperRef$value2 = tabsWrapperRef.value) === null || _tabsWrapperRef$value2 === void 0 ? void 0 : _tabsWrapperRef$value2.offsetHeight) || 0;\n      var addDom = ((_innerAddButtonRef$va = innerAddButtonRef.value) === null || _innerAddButtonRef$va === void 0 ? void 0 : _innerAddButtonRef$va.$el) || {};\n      var newAddWidth = addDom.offsetWidth || 0;\n      var newAddHeight = addDom.offsetHeight || 0;\n      setWrapperWidth(offsetWidth);\n      setWrapperHeight(offsetHeight);\n      setAddWidth(newAddWidth);\n      setAddHeight(newAddHeight);\n      var newWrapperScrollWidth = (((_tabListRef$value = tabListRef.value) === null || _tabListRef$value === void 0 ? void 0 : _tabListRef$value.offsetWidth) || 0) - newAddWidth;\n      var newWrapperScrollHeight = (((_tabListRef$value2 = tabListRef.value) === null || _tabListRef$value2 === void 0 ? void 0 : _tabListRef$value2.offsetHeight) || 0) - newAddHeight;\n      setWrapperScrollWidth(newWrapperScrollWidth);\n      setWrapperScrollHeight(newWrapperScrollHeight); // Update buttons records\n\n      setTabSizes(function () {\n        var newSizes = new Map();\n        tabs.value.forEach(function (_ref4) {\n          var key = _ref4.key;\n          var btnRef = btnRefs.value.get(key);\n          var btnNode = (btnRef === null || btnRef === void 0 ? void 0 : btnRef.$el) || btnRef;\n\n          if (btnNode) {\n            newSizes.set(key, {\n              width: btnNode.offsetWidth,\n              height: btnNode.offsetHeight,\n              left: btnNode.offsetLeft,\n              top: btnNode.offsetTop\n            });\n          }\n        });\n        return newSizes;\n      });\n    }; // ======================== Dropdown =======================\n\n\n    var hiddenTabs = computed(function () {\n      return [].concat(_toConsumableArray(tabs.value.slice(0, visibleStart.value)), _toConsumableArray(tabs.value.slice(visibleEnd.value + 1)));\n    }); // =================== Link & Operations ===================\n\n    var _useState15 = useState(),\n        _useState16 = _slicedToArray(_useState15, 2),\n        inkStyle = _useState16[0],\n        setInkStyle = _useState16[1];\n\n    var activeTabOffset = computed(function () {\n      return tabOffsets.value.get(props.activeKey);\n    }); // Delay set ink style to avoid remove tab blink\n\n    var inkBarRafRef = ref();\n\n    var cleanInkBarRaf = function cleanInkBarRaf() {\n      raf.cancel(inkBarRafRef.value);\n    };\n\n    watch([activeTabOffset, tabPositionTopOrBottom, function () {\n      return props.rtl;\n    }], function () {\n      var newInkStyle = {};\n\n      if (activeTabOffset.value) {\n        if (tabPositionTopOrBottom.value) {\n          if (props.rtl) {\n            newInkStyle.right = toPx(activeTabOffset.value.right);\n          } else {\n            newInkStyle.left = toPx(activeTabOffset.value.left);\n          }\n\n          newInkStyle.width = toPx(activeTabOffset.value.width);\n        } else {\n          newInkStyle.top = toPx(activeTabOffset.value.top);\n          newInkStyle.height = toPx(activeTabOffset.value.height);\n        }\n      }\n\n      cleanInkBarRaf();\n      inkBarRafRef.value = raf(function () {\n        setInkStyle(newInkStyle);\n      });\n    });\n    watch([function () {\n      return props.activeKey;\n    }, activeTabOffset, tabOffsets, tabPositionTopOrBottom], function () {\n      scrollToTab();\n    }, {\n      flush: 'post'\n    });\n    watch([function () {\n      return props.rtl;\n    }, function () {\n      return props.tabBarGutter;\n    }, function () {\n      return props.activeKey;\n    }, function () {\n      return tabs.value;\n    }], function () {\n      onListHolderResize();\n    }, {\n      flush: 'post'\n    });\n\n    var ExtraContent = function ExtraContent(_ref5) {\n      var position = _ref5.position,\n          prefixCls = _ref5.prefixCls,\n          extra = _ref5.extra;\n      if (!extra) return null;\n      var content = extra === null || extra === void 0 ? void 0 : extra({\n        position: position\n      });\n      return content ? _createVNode(\"div\", {\n        \"class\": \"\".concat(prefixCls, \"-extra-content\")\n      }, [content]) : null;\n    };\n\n    onBeforeUnmount(function () {\n      clearTouchMoving();\n      cleanInkBarRaf();\n    });\n    return function () {\n      var _classNames;\n\n      var id = props.id,\n          animated = props.animated,\n          activeKey = props.activeKey,\n          rtl = props.rtl,\n          editable = props.editable,\n          locale = props.locale,\n          tabPosition = props.tabPosition,\n          tabBarGutter = props.tabBarGutter,\n          onTabClick = props.onTabClick;\n      var className = attrs.class,\n          style = attrs.style;\n      var pre = prefixCls.value; // ========================= Render ========================\n\n      var hasDropdown = !!hiddenTabs.value.length;\n      var wrapPrefix = \"\".concat(pre, \"-nav-wrap\");\n      var pingLeft;\n      var pingRight;\n      var pingTop;\n      var pingBottom;\n\n      if (tabPositionTopOrBottom.value) {\n        if (rtl) {\n          pingRight = transformLeft.value > 0;\n          pingLeft = transformLeft.value + wrapperWidth.value < wrapperScrollWidth.value;\n        } else {\n          pingLeft = transformLeft.value < 0;\n          pingRight = -transformLeft.value + wrapperWidth.value < wrapperScrollWidth.value;\n        }\n      } else {\n        pingTop = transformTop.value < 0;\n        pingBottom = -transformTop.value + wrapperHeight.value < wrapperScrollHeight.value;\n      }\n\n      var tabNodeStyle = {};\n\n      if (tabPosition === 'top' || tabPosition === 'bottom') {\n        tabNodeStyle[rtl ? 'marginRight' : 'marginLeft'] = typeof tabBarGutter === 'number' ? \"\".concat(tabBarGutter, \"px\") : tabBarGutter;\n      } else {\n        tabNodeStyle.marginTop = typeof tabBarGutter === 'number' ? \"\".concat(tabBarGutter, \"px\") : tabBarGutter;\n      }\n\n      var tabNodes = tabs.value.map(function (tab, i) {\n        var key = tab.key;\n        return _createVNode(TabNode, {\n          \"id\": id,\n          \"prefixCls\": pre,\n          \"key\": key,\n          \"tab\": tab,\n          \"style\": i === 0 ? undefined : tabNodeStyle,\n          \"closable\": tab.closable,\n          \"editable\": editable,\n          \"active\": key === activeKey,\n          \"removeAriaLabel\": locale === null || locale === void 0 ? void 0 : locale.removeAriaLabel,\n          \"ref\": setRef(key),\n          \"onClick\": function onClick(e) {\n            onTabClick(key, e);\n          },\n          \"onFocus\": function onFocus() {\n            scrollToTab(key);\n            doLockAnimation();\n\n            if (!tabsWrapperRef.value) {\n              return;\n            } // Focus element will make scrollLeft change which we should reset back\n\n\n            if (!rtl) {\n              tabsWrapperRef.value.scrollLeft = 0;\n            }\n\n            tabsWrapperRef.value.scrollTop = 0;\n          }\n        }, slots);\n      });\n      return _createVNode(\"div\", {\n        \"role\": \"tablist\",\n        \"class\": classNames(\"\".concat(pre, \"-nav\"), className),\n        \"style\": style,\n        \"onKeydown\": function onKeydown() {\n          // No need animation when use keyboard\n          doLockAnimation();\n        }\n      }, [_createVNode(ExtraContent, {\n        \"position\": \"left\",\n        \"prefixCls\": pre,\n        \"extra\": slots.leftExtra\n      }, null), _createVNode(ResizeObserver, {\n        \"onResize\": onListHolderResize\n      }, {\n        default: function _default() {\n          return [_createVNode(\"div\", {\n            \"class\": classNames(wrapPrefix, (_classNames = {}, _defineProperty(_classNames, \"\".concat(wrapPrefix, \"-ping-left\"), pingLeft), _defineProperty(_classNames, \"\".concat(wrapPrefix, \"-ping-right\"), pingRight), _defineProperty(_classNames, \"\".concat(wrapPrefix, \"-ping-top\"), pingTop), _defineProperty(_classNames, \"\".concat(wrapPrefix, \"-ping-bottom\"), pingBottom), _classNames)),\n            \"ref\": tabsWrapperRef\n          }, [_createVNode(ResizeObserver, {\n            \"onResize\": onListHolderResize\n          }, {\n            default: function _default() {\n              return [_createVNode(\"div\", {\n                \"ref\": tabListRef,\n                \"class\": \"\".concat(pre, \"-nav-list\"),\n                \"style\": {\n                  transform: \"translate(\".concat(transformLeft.value, \"px, \").concat(transformTop.value, \"px)\"),\n                  transition: lockAnimation.value ? 'none' : undefined\n                }\n              }, [tabNodes, _createVNode(AddButton, {\n                \"ref\": innerAddButtonRef,\n                \"prefixCls\": pre,\n                \"locale\": locale,\n                \"editable\": editable,\n                \"style\": _objectSpread(_objectSpread({}, tabNodes.length === 0 ? undefined : tabNodeStyle), {}, {\n                  visibility: hasDropdown ? 'hidden' : null\n                })\n              }, null), _createVNode(\"div\", {\n                \"class\": classNames(\"\".concat(pre, \"-ink-bar\"), _defineProperty({}, \"\".concat(pre, \"-ink-bar-animated\"), animated.inkBar)),\n                \"style\": inkStyle.value\n              }, null)])];\n            }\n          })])];\n        }\n      }), _createVNode(OperationNode, _objectSpread(_objectSpread({}, props), {}, {\n        \"removeAriaLabel\": locale === null || locale === void 0 ? void 0 : locale.removeAriaLabel,\n        \"ref\": operationsRef,\n        \"prefixCls\": pre,\n        \"tabs\": hiddenTabs.value,\n        \"class\": !hasDropdown && operationsHiddenClassName.value\n      }), pick(slots, ['moreIcon'])), _createVNode(ExtraContent, {\n        \"position\": \"right\",\n        \"prefixCls\": pre,\n        \"extra\": slots.rightExtra\n      }, null), _createVNode(ExtraContent, {\n        \"position\": \"right\",\n        \"prefixCls\": pre,\n        \"extra\": slots.tabBarExtraContent\n      }, null)]);\n    };\n  }\n});","map":{"version":3,"names":["_objectSpread","_defineProperty","_toConsumableArray","_slicedToArray","resolveDirective","_resolveDirective","createVNode","_createVNode","useRafState","TabNode","useOffsets","OperationNode","useInjectTabs","useTouchMove","AddButton","onBeforeUnmount","defineComponent","ref","watch","watchEffect","computed","PropTypes","useSyncState","useState","raf","classNames","ResizeObserver","toPx","useRefs","pick","DEFAULT_SIZE","width","height","left","top","right","tabNavListProps","id","type","String","tabPosition","activeKey","Number","rtl","Boolean","animated","Object","default","undefined","editable","moreIcon","any","moreTransitionName","mobile","tabBarGutter","renderTabBar","Function","locale","onTabClick","onTabScroll","compatConfig","MODE","name","inheritAttrs","props","slots","emits","setup","_ref","attrs","_useInjectTabs","tabs","prefixCls","tabsWrapperRef","tabListRef","operationsRef","innerAddButtonRef","_useRefs","_useRefs2","setRef","btnRefs","tabPositionTopOrBottom","_useSyncState","next","prev","value","direction","_useSyncState2","transformLeft","setTransformLeft","_useSyncState3","_useSyncState4","transformTop","setTransformTop","_useState","_useState2","wrapperScrollWidth","setWrapperScrollWidth","_useState3","_useState4","wrapperScrollHeight","setWrapperScrollHeight","_useState5","_useState6","wrapperWidth","setWrapperWidth","_useState7","_useState8","wrapperHeight","setWrapperHeight","_useState9","_useState10","addWidth","setAddWidth","_useState11","_useState12","addHeight","setAddHeight","_useRafState","Map","_useRafState2","tabSizes","setTabSizes","tabOffsets","operationsHiddenClassName","concat","transformMin","transformMax","Math","min","max","alignInRange","touchMovingRef","_useState13","_useState14","lockAnimation","setLockAnimation","doLockAnimation","Date","now","clearTouchMoving","clearTimeout","doMove","setState","offset","newValue","offsetX","offsetY","setTimeout","scrollToTab","key","arguments","length","tabOffset","get","newTransform","_newTransform","visibleStart","visibleEnd","_ref3","unit","position","transformSize","basicSize","tabContentSize","addSize","tabOffsetsValue","includes","abs","mergedBasicSize","tabsVal","_ref2","len","endIndex","i","startIndex","_i","_offset","onListHolderResize","_tabsWrapperRef$value","_tabsWrapperRef$value2","_innerAddButtonRef$va","_tabListRef$value","_tabListRef$value2","offsetWidth","offsetHeight","addDom","$el","newAddWidth","newAddHeight","newWrapperScrollWidth","newWrapperScrollHeight","newSizes","forEach","_ref4","btnRef","btnNode","set","offsetLeft","offsetTop","hiddenTabs","slice","_useState15","_useState16","inkStyle","setInkStyle","activeTabOffset","inkBarRafRef","cleanInkBarRaf","cancel","newInkStyle","flush","ExtraContent","_ref5","extra","content","_classNames","className","class","style","pre","hasDropdown","wrapPrefix","pingLeft","pingRight","pingTop","pingBottom","tabNodeStyle","marginTop","tabNodes","map","tab","closable","removeAriaLabel","onClick","e","onFocus","scrollLeft","scrollTop","onKeydown","leftExtra","_default","transform","transition","visibility","inkBar","rightExtra","tabBarExtraContent"],"sources":["/Users/jasonti/Desktop/Tripper/vue/node_modules/ant-design-vue/es/tabs/src/TabNavList/index.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { resolveDirective as _resolveDirective, createVNode as _createVNode } from \"vue\";\nimport { useRafState } from '../hooks/useRaf';\nimport TabNode from './TabNode';\nimport useOffsets from '../hooks/useOffsets';\nimport OperationNode from './OperationNode';\nimport { useInjectTabs } from '../TabContext';\nimport useTouchMove from '../hooks/useTouchMove';\nimport AddButton from './AddButton';\nimport { onBeforeUnmount, defineComponent, ref, watch, watchEffect, computed } from 'vue';\nimport PropTypes from '../../../_util/vue-types';\nimport useSyncState from '../hooks/useSyncState';\nimport useState from '../../../_util/hooks/useState';\nimport raf from '../../../_util/raf';\nimport classNames from '../../../_util/classNames';\nimport ResizeObserver from '../../../vc-resize-observer';\nimport { toPx } from '../../../_util/util';\nimport useRefs from '../../../_util/hooks/useRefs';\nimport pick from 'lodash-es/pick';\nvar DEFAULT_SIZE = {\n  width: 0,\n  height: 0,\n  left: 0,\n  top: 0,\n  right: 0\n};\nexport var tabNavListProps = function tabNavListProps() {\n  return {\n    id: {\n      type: String\n    },\n    tabPosition: {\n      type: String\n    },\n    activeKey: {\n      type: [String, Number]\n    },\n    rtl: {\n      type: Boolean\n    },\n    animated: {\n      type: Object,\n      default: undefined\n    },\n    editable: {\n      type: Object\n    },\n    moreIcon: PropTypes.any,\n    moreTransitionName: {\n      type: String\n    },\n    mobile: {\n      type: Boolean\n    },\n    tabBarGutter: {\n      type: Number\n    },\n    renderTabBar: {\n      type: Function\n    },\n    locale: {\n      type: Object,\n      default: undefined\n    },\n    onTabClick: {\n      type: Function\n    },\n    onTabScroll: {\n      type: Function\n    }\n  };\n};\nexport default defineComponent({\n  compatConfig: {\n    MODE: 3\n  },\n  name: 'TabNavList',\n  inheritAttrs: false,\n  props: tabNavListProps(),\n  slots: ['moreIcon', 'leftExtra', 'rightExtra', 'tabBarExtraContent'],\n  emits: ['tabClick', 'tabScroll'],\n  setup: function setup(props, _ref) {\n    var attrs = _ref.attrs,\n      slots = _ref.slots;\n    var _useInjectTabs = useInjectTabs(),\n      tabs = _useInjectTabs.tabs,\n      prefixCls = _useInjectTabs.prefixCls;\n    var tabsWrapperRef = ref();\n    var tabListRef = ref();\n    var operationsRef = ref();\n    var innerAddButtonRef = ref();\n    var _useRefs = useRefs(),\n      _useRefs2 = _slicedToArray(_useRefs, 2),\n      setRef = _useRefs2[0],\n      btnRefs = _useRefs2[1];\n    var tabPositionTopOrBottom = computed(function () {\n      return props.tabPosition === 'top' || props.tabPosition === 'bottom';\n    });\n    var _useSyncState = useSyncState(0, function (next, prev) {\n        if (tabPositionTopOrBottom.value && props.onTabScroll) {\n          props.onTabScroll({\n            direction: next > prev ? 'left' : 'right'\n          });\n        }\n      }),\n      _useSyncState2 = _slicedToArray(_useSyncState, 2),\n      transformLeft = _useSyncState2[0],\n      setTransformLeft = _useSyncState2[1];\n    var _useSyncState3 = useSyncState(0, function (next, prev) {\n        if (!tabPositionTopOrBottom.value && props.onTabScroll) {\n          props.onTabScroll({\n            direction: next > prev ? 'top' : 'bottom'\n          });\n        }\n      }),\n      _useSyncState4 = _slicedToArray(_useSyncState3, 2),\n      transformTop = _useSyncState4[0],\n      setTransformTop = _useSyncState4[1];\n    var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      wrapperScrollWidth = _useState2[0],\n      setWrapperScrollWidth = _useState2[1];\n    var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      wrapperScrollHeight = _useState4[0],\n      setWrapperScrollHeight = _useState4[1];\n    var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      wrapperWidth = _useState6[0],\n      setWrapperWidth = _useState6[1];\n    var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      wrapperHeight = _useState8[0],\n      setWrapperHeight = _useState8[1];\n    var _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      addWidth = _useState10[0],\n      setAddWidth = _useState10[1];\n    var _useState11 = useState(0),\n      _useState12 = _slicedToArray(_useState11, 2),\n      addHeight = _useState12[0],\n      setAddHeight = _useState12[1];\n    var _useRafState = useRafState(new Map()),\n      _useRafState2 = _slicedToArray(_useRafState, 2),\n      tabSizes = _useRafState2[0],\n      setTabSizes = _useRafState2[1];\n    var tabOffsets = useOffsets(tabs, tabSizes);\n    // ========================== Util =========================\n    var operationsHiddenClassName = computed(function () {\n      return \"\".concat(prefixCls.value, \"-nav-operations-hidden\");\n    });\n    var transformMin = ref(0);\n    var transformMax = ref(0);\n    watchEffect(function () {\n      if (!tabPositionTopOrBottom.value) {\n        transformMin.value = Math.min(0, wrapperHeight.value - wrapperScrollHeight.value);\n        transformMax.value = 0;\n      } else if (props.rtl) {\n        transformMin.value = 0;\n        transformMax.value = Math.max(0, wrapperScrollWidth.value - wrapperWidth.value);\n      } else {\n        transformMin.value = Math.min(0, wrapperWidth.value - wrapperScrollWidth.value);\n        transformMax.value = 0;\n      }\n    });\n    var alignInRange = function alignInRange(value) {\n      if (value < transformMin.value) {\n        return transformMin.value;\n      }\n      if (value > transformMax.value) {\n        return transformMax.value;\n      }\n      return value;\n    };\n    // ========================= Mobile ========================\n    var touchMovingRef = ref();\n    var _useState13 = useState(),\n      _useState14 = _slicedToArray(_useState13, 2),\n      lockAnimation = _useState14[0],\n      setLockAnimation = _useState14[1];\n    var doLockAnimation = function doLockAnimation() {\n      setLockAnimation(Date.now());\n    };\n    var clearTouchMoving = function clearTouchMoving() {\n      clearTimeout(touchMovingRef.value);\n    };\n    var doMove = function doMove(setState, offset) {\n      setState(function (value) {\n        var newValue = alignInRange(value + offset);\n        return newValue;\n      });\n    };\n    useTouchMove(tabsWrapperRef, function (offsetX, offsetY) {\n      if (tabPositionTopOrBottom.value) {\n        // Skip scroll if place is enough\n        if (wrapperWidth.value >= wrapperScrollWidth.value) {\n          return false;\n        }\n        doMove(setTransformLeft, offsetX);\n      } else {\n        if (wrapperHeight.value >= wrapperScrollHeight.value) {\n          return false;\n        }\n        doMove(setTransformTop, offsetY);\n      }\n      clearTouchMoving();\n      doLockAnimation();\n      return true;\n    });\n    watch(lockAnimation, function () {\n      clearTouchMoving();\n      if (lockAnimation.value) {\n        touchMovingRef.value = setTimeout(function () {\n          setLockAnimation(0);\n        }, 100);\n      }\n    });\n    // ========================= Scroll ========================\n    var scrollToTab = function scrollToTab() {\n      var key = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : props.activeKey;\n      var tabOffset = tabOffsets.value.get(key) || {\n        width: 0,\n        height: 0,\n        left: 0,\n        right: 0,\n        top: 0\n      };\n      if (tabPositionTopOrBottom.value) {\n        // ============ Align with top & bottom ============\n        var newTransform = transformLeft.value;\n        // RTL\n        if (props.rtl) {\n          if (tabOffset.right < transformLeft.value) {\n            newTransform = tabOffset.right;\n          } else if (tabOffset.right + tabOffset.width > transformLeft.value + wrapperWidth.value) {\n            newTransform = tabOffset.right + tabOffset.width - wrapperWidth.value;\n          }\n        }\n        // LTR\n        else if (tabOffset.left < -transformLeft.value) {\n          newTransform = -tabOffset.left;\n        } else if (tabOffset.left + tabOffset.width > -transformLeft.value + wrapperWidth.value) {\n          newTransform = -(tabOffset.left + tabOffset.width - wrapperWidth.value);\n        }\n        setTransformTop(0);\n        setTransformLeft(alignInRange(newTransform));\n      } else {\n        // ============ Align with left & right ============\n        var _newTransform = transformTop.value;\n        if (tabOffset.top < -transformTop.value) {\n          _newTransform = -tabOffset.top;\n        } else if (tabOffset.top + tabOffset.height > -transformTop.value + wrapperHeight.value) {\n          _newTransform = -(tabOffset.top + tabOffset.height - wrapperHeight.value);\n        }\n        setTransformLeft(0);\n        setTransformTop(alignInRange(_newTransform));\n      }\n    };\n    var visibleStart = ref(0);\n    var visibleEnd = ref(0);\n    watchEffect(function () {\n      var _ref3;\n      var unit;\n      var position;\n      var transformSize;\n      var basicSize;\n      var tabContentSize;\n      var addSize;\n      var tabOffsetsValue = tabOffsets.value;\n      if (['top', 'bottom'].includes(props.tabPosition)) {\n        unit = 'width';\n        basicSize = wrapperWidth.value;\n        tabContentSize = wrapperScrollWidth.value;\n        addSize = addWidth.value;\n        position = props.rtl ? 'right' : 'left';\n        transformSize = Math.abs(transformLeft.value);\n      } else {\n        unit = 'height';\n        basicSize = wrapperHeight.value;\n        tabContentSize = wrapperScrollWidth.value;\n        addSize = addHeight.value;\n        position = 'top';\n        transformSize = -transformTop.value;\n      }\n      var mergedBasicSize = basicSize;\n      if (tabContentSize + addSize > basicSize && tabContentSize < basicSize) {\n        mergedBasicSize = basicSize - addSize;\n      }\n      var tabsVal = tabs.value;\n      if (!tabsVal.length) {\n        var _ref2;\n        return _ref2 = [0, 0], visibleStart.value = _ref2[0], visibleEnd.value = _ref2[1], _ref2;\n      }\n      var len = tabsVal.length;\n      var endIndex = len;\n      for (var i = 0; i < len; i += 1) {\n        var offset = tabOffsetsValue.get(tabsVal[i].key) || DEFAULT_SIZE;\n        if (offset[position] + offset[unit] > transformSize + mergedBasicSize) {\n          endIndex = i - 1;\n          break;\n        }\n      }\n      var startIndex = 0;\n      for (var _i = len - 1; _i >= 0; _i -= 1) {\n        var _offset = tabOffsetsValue.get(tabsVal[_i].key) || DEFAULT_SIZE;\n        if (_offset[position] < transformSize) {\n          startIndex = _i + 1;\n          break;\n        }\n      }\n      return _ref3 = [startIndex, endIndex], visibleStart.value = _ref3[0], visibleEnd.value = _ref3[1], _ref3;\n    });\n    var onListHolderResize = function onListHolderResize() {\n      var _tabsWrapperRef$value, _tabsWrapperRef$value2, _innerAddButtonRef$va, _tabListRef$value, _tabListRef$value2;\n      // Update wrapper records\n      var offsetWidth = ((_tabsWrapperRef$value = tabsWrapperRef.value) === null || _tabsWrapperRef$value === void 0 ? void 0 : _tabsWrapperRef$value.offsetWidth) || 0;\n      var offsetHeight = ((_tabsWrapperRef$value2 = tabsWrapperRef.value) === null || _tabsWrapperRef$value2 === void 0 ? void 0 : _tabsWrapperRef$value2.offsetHeight) || 0;\n      var addDom = ((_innerAddButtonRef$va = innerAddButtonRef.value) === null || _innerAddButtonRef$va === void 0 ? void 0 : _innerAddButtonRef$va.$el) || {};\n      var newAddWidth = addDom.offsetWidth || 0;\n      var newAddHeight = addDom.offsetHeight || 0;\n      setWrapperWidth(offsetWidth);\n      setWrapperHeight(offsetHeight);\n      setAddWidth(newAddWidth);\n      setAddHeight(newAddHeight);\n      var newWrapperScrollWidth = (((_tabListRef$value = tabListRef.value) === null || _tabListRef$value === void 0 ? void 0 : _tabListRef$value.offsetWidth) || 0) - newAddWidth;\n      var newWrapperScrollHeight = (((_tabListRef$value2 = tabListRef.value) === null || _tabListRef$value2 === void 0 ? void 0 : _tabListRef$value2.offsetHeight) || 0) - newAddHeight;\n      setWrapperScrollWidth(newWrapperScrollWidth);\n      setWrapperScrollHeight(newWrapperScrollHeight);\n      // Update buttons records\n      setTabSizes(function () {\n        var newSizes = new Map();\n        tabs.value.forEach(function (_ref4) {\n          var key = _ref4.key;\n          var btnRef = btnRefs.value.get(key);\n          var btnNode = (btnRef === null || btnRef === void 0 ? void 0 : btnRef.$el) || btnRef;\n          if (btnNode) {\n            newSizes.set(key, {\n              width: btnNode.offsetWidth,\n              height: btnNode.offsetHeight,\n              left: btnNode.offsetLeft,\n              top: btnNode.offsetTop\n            });\n          }\n        });\n        return newSizes;\n      });\n    };\n    // ======================== Dropdown =======================\n    var hiddenTabs = computed(function () {\n      return [].concat(_toConsumableArray(tabs.value.slice(0, visibleStart.value)), _toConsumableArray(tabs.value.slice(visibleEnd.value + 1)));\n    });\n    // =================== Link & Operations ===================\n    var _useState15 = useState(),\n      _useState16 = _slicedToArray(_useState15, 2),\n      inkStyle = _useState16[0],\n      setInkStyle = _useState16[1];\n    var activeTabOffset = computed(function () {\n      return tabOffsets.value.get(props.activeKey);\n    });\n    // Delay set ink style to avoid remove tab blink\n    var inkBarRafRef = ref();\n    var cleanInkBarRaf = function cleanInkBarRaf() {\n      raf.cancel(inkBarRafRef.value);\n    };\n    watch([activeTabOffset, tabPositionTopOrBottom, function () {\n      return props.rtl;\n    }], function () {\n      var newInkStyle = {};\n      if (activeTabOffset.value) {\n        if (tabPositionTopOrBottom.value) {\n          if (props.rtl) {\n            newInkStyle.right = toPx(activeTabOffset.value.right);\n          } else {\n            newInkStyle.left = toPx(activeTabOffset.value.left);\n          }\n          newInkStyle.width = toPx(activeTabOffset.value.width);\n        } else {\n          newInkStyle.top = toPx(activeTabOffset.value.top);\n          newInkStyle.height = toPx(activeTabOffset.value.height);\n        }\n      }\n      cleanInkBarRaf();\n      inkBarRafRef.value = raf(function () {\n        setInkStyle(newInkStyle);\n      });\n    });\n    watch([function () {\n      return props.activeKey;\n    }, activeTabOffset, tabOffsets, tabPositionTopOrBottom], function () {\n      scrollToTab();\n    }, {\n      flush: 'post'\n    });\n    watch([function () {\n      return props.rtl;\n    }, function () {\n      return props.tabBarGutter;\n    }, function () {\n      return props.activeKey;\n    }, function () {\n      return tabs.value;\n    }], function () {\n      onListHolderResize();\n    }, {\n      flush: 'post'\n    });\n    var ExtraContent = function ExtraContent(_ref5) {\n      var position = _ref5.position,\n        prefixCls = _ref5.prefixCls,\n        extra = _ref5.extra;\n      if (!extra) return null;\n      var content = extra === null || extra === void 0 ? void 0 : extra({\n        position: position\n      });\n      return content ? _createVNode(\"div\", {\n        \"class\": \"\".concat(prefixCls, \"-extra-content\")\n      }, [content]) : null;\n    };\n    onBeforeUnmount(function () {\n      clearTouchMoving();\n      cleanInkBarRaf();\n    });\n    return function () {\n      var _classNames;\n      var id = props.id,\n        animated = props.animated,\n        activeKey = props.activeKey,\n        rtl = props.rtl,\n        editable = props.editable,\n        locale = props.locale,\n        tabPosition = props.tabPosition,\n        tabBarGutter = props.tabBarGutter,\n        onTabClick = props.onTabClick;\n      var className = attrs.class,\n        style = attrs.style;\n      var pre = prefixCls.value;\n      // ========================= Render ========================\n      var hasDropdown = !!hiddenTabs.value.length;\n      var wrapPrefix = \"\".concat(pre, \"-nav-wrap\");\n      var pingLeft;\n      var pingRight;\n      var pingTop;\n      var pingBottom;\n      if (tabPositionTopOrBottom.value) {\n        if (rtl) {\n          pingRight = transformLeft.value > 0;\n          pingLeft = transformLeft.value + wrapperWidth.value < wrapperScrollWidth.value;\n        } else {\n          pingLeft = transformLeft.value < 0;\n          pingRight = -transformLeft.value + wrapperWidth.value < wrapperScrollWidth.value;\n        }\n      } else {\n        pingTop = transformTop.value < 0;\n        pingBottom = -transformTop.value + wrapperHeight.value < wrapperScrollHeight.value;\n      }\n      var tabNodeStyle = {};\n      if (tabPosition === 'top' || tabPosition === 'bottom') {\n        tabNodeStyle[rtl ? 'marginRight' : 'marginLeft'] = typeof tabBarGutter === 'number' ? \"\".concat(tabBarGutter, \"px\") : tabBarGutter;\n      } else {\n        tabNodeStyle.marginTop = typeof tabBarGutter === 'number' ? \"\".concat(tabBarGutter, \"px\") : tabBarGutter;\n      }\n      var tabNodes = tabs.value.map(function (tab, i) {\n        var key = tab.key;\n        return _createVNode(TabNode, {\n          \"id\": id,\n          \"prefixCls\": pre,\n          \"key\": key,\n          \"tab\": tab,\n          \"style\": i === 0 ? undefined : tabNodeStyle,\n          \"closable\": tab.closable,\n          \"editable\": editable,\n          \"active\": key === activeKey,\n          \"removeAriaLabel\": locale === null || locale === void 0 ? void 0 : locale.removeAriaLabel,\n          \"ref\": setRef(key),\n          \"onClick\": function onClick(e) {\n            onTabClick(key, e);\n          },\n          \"onFocus\": function onFocus() {\n            scrollToTab(key);\n            doLockAnimation();\n            if (!tabsWrapperRef.value) {\n              return;\n            }\n            // Focus element will make scrollLeft change which we should reset back\n            if (!rtl) {\n              tabsWrapperRef.value.scrollLeft = 0;\n            }\n            tabsWrapperRef.value.scrollTop = 0;\n          }\n        }, slots);\n      });\n      return _createVNode(\"div\", {\n        \"role\": \"tablist\",\n        \"class\": classNames(\"\".concat(pre, \"-nav\"), className),\n        \"style\": style,\n        \"onKeydown\": function onKeydown() {\n          // No need animation when use keyboard\n          doLockAnimation();\n        }\n      }, [_createVNode(ExtraContent, {\n        \"position\": \"left\",\n        \"prefixCls\": pre,\n        \"extra\": slots.leftExtra\n      }, null), _createVNode(ResizeObserver, {\n        \"onResize\": onListHolderResize\n      }, {\n        default: function _default() {\n          return [_createVNode(\"div\", {\n            \"class\": classNames(wrapPrefix, (_classNames = {}, _defineProperty(_classNames, \"\".concat(wrapPrefix, \"-ping-left\"), pingLeft), _defineProperty(_classNames, \"\".concat(wrapPrefix, \"-ping-right\"), pingRight), _defineProperty(_classNames, \"\".concat(wrapPrefix, \"-ping-top\"), pingTop), _defineProperty(_classNames, \"\".concat(wrapPrefix, \"-ping-bottom\"), pingBottom), _classNames)),\n            \"ref\": tabsWrapperRef\n          }, [_createVNode(ResizeObserver, {\n            \"onResize\": onListHolderResize\n          }, {\n            default: function _default() {\n              return [_createVNode(\"div\", {\n                \"ref\": tabListRef,\n                \"class\": \"\".concat(pre, \"-nav-list\"),\n                \"style\": {\n                  transform: \"translate(\".concat(transformLeft.value, \"px, \").concat(transformTop.value, \"px)\"),\n                  transition: lockAnimation.value ? 'none' : undefined\n                }\n              }, [tabNodes, _createVNode(AddButton, {\n                \"ref\": innerAddButtonRef,\n                \"prefixCls\": pre,\n                \"locale\": locale,\n                \"editable\": editable,\n                \"style\": _objectSpread(_objectSpread({}, tabNodes.length === 0 ? undefined : tabNodeStyle), {}, {\n                  visibility: hasDropdown ? 'hidden' : null\n                })\n              }, null), _createVNode(\"div\", {\n                \"class\": classNames(\"\".concat(pre, \"-ink-bar\"), _defineProperty({}, \"\".concat(pre, \"-ink-bar-animated\"), animated.inkBar)),\n                \"style\": inkStyle.value\n              }, null)])];\n            }\n          })])];\n        }\n      }), _createVNode(OperationNode, _objectSpread(_objectSpread({}, props), {}, {\n        \"removeAriaLabel\": locale === null || locale === void 0 ? void 0 : locale.removeAriaLabel,\n        \"ref\": operationsRef,\n        \"prefixCls\": pre,\n        \"tabs\": hiddenTabs.value,\n        \"class\": !hasDropdown && operationsHiddenClassName.value\n      }), pick(slots, ['moreIcon'])), _createVNode(ExtraContent, {\n        \"position\": \"right\",\n        \"prefixCls\": pre,\n        \"extra\": slots.rightExtra\n      }, null), _createVNode(ExtraContent, {\n        \"position\": \"right\",\n        \"prefixCls\": pre,\n        \"extra\": slots.tabBarExtraContent\n      }, null)]);\n    };\n  }\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}