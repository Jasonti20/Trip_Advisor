{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport { createVNode as _createVNode, resolveDirective as _resolveDirective } from \"vue\";\n/**\n * To match accessibility requirement, we always provide an input in the component.\n * Other element will not set `tabindex` to avoid `onBlur` sequence problem.\n * For focused select, we set `aria-live=\"polite\"` to update the accessibility content.\n *\n * ref:\n * - keyboard: https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/listbox_role#Keyboard_interactions\n *\n * New api:\n * - listHeight\n * - listItemHeight\n * - component\n *\n * Remove deprecated api:\n * - multiple\n * - tags\n * - combobox\n * - firstActiveValue\n * - dropdownMenuStyle\n * - openClassName (Not list in api)\n *\n * Update:\n * - `backfill` only support `combobox` mode\n * - `combobox` mode not support `labelInValue` since it's meaningless\n * - `getInputElement` only support `combobox` mode\n * - `onChange` return OptionData instead of ReactNode\n * - `filterOption` `onChange` `onSelect` accept OptionData instead of ReactNode\n * - `combobox` mode trigger `onChange` will get `undefined` if no `value` match in Option\n * - `combobox` mode not support `optionLabelProp`\n */\n\nimport BaseSelect, { baseSelectPropsWithoutPrivate, isMultiple } from './BaseSelect';\nimport OptionList from './OptionList';\nimport useOptions from './hooks/useOptions';\nimport { useProvideSelectProps } from './SelectContext';\nimport useId from './hooks/useId';\nimport { fillFieldNames, flattenOptions, injectPropsWithOption } from './utils/valueUtil';\nimport warningProps from './utils/warningPropsUtil';\nimport { toArray } from './utils/commonUtil';\nimport useFilterOptions from './hooks/useFilterOptions';\nimport useCache from './hooks/useCache';\nimport { computed, defineComponent, ref, shallowRef, toRef, watchEffect } from 'vue';\nimport PropTypes from '../_util/vue-types';\nimport { initDefaultProps } from '../_util/props-util';\nimport useMergedState from '../_util/hooks/useMergedState';\nimport useState from '../_util/hooks/useState';\nimport { toReactive } from '../_util/toReactive';\nimport omit from '../_util/omit';\nvar OMIT_DOM_PROPS = ['inputValue'];\nexport function selectProps() {\n  return _objectSpread(_objectSpread({}, baseSelectPropsWithoutPrivate()), {}, {\n    prefixCls: String,\n    id: String,\n    backfill: {\n      type: Boolean,\n      default: undefined\n    },\n    // >>> Field Names\n    fieldNames: Object,\n    // >>> Search\n\n    /** @deprecated Use `searchValue` instead */\n    inputValue: String,\n    searchValue: String,\n    onSearch: Function,\n    autoClearSearchValue: {\n      type: Boolean,\n      default: undefined\n    },\n    // >>> Select\n    onSelect: Function,\n    onDeselect: Function,\n    // >>> Options\n\n    /**\n     * In Select, `false` means do nothing.\n     * In TreeSelect, `false` will highlight match item.\n     * It's by design.\n     */\n    filterOption: {\n      type: [Boolean, Function],\n      default: undefined\n    },\n    filterSort: Function,\n    optionFilterProp: String,\n    optionLabelProp: String,\n    options: Array,\n    defaultActiveFirstOption: {\n      type: Boolean,\n      default: undefined\n    },\n    virtual: {\n      type: Boolean,\n      default: undefined\n    },\n    listHeight: Number,\n    listItemHeight: Number,\n    // >>> Icon\n    menuItemSelectedIcon: PropTypes.any,\n    mode: String,\n    labelInValue: {\n      type: Boolean,\n      default: undefined\n    },\n    value: PropTypes.any,\n    defaultValue: PropTypes.any,\n    onChange: Function,\n    children: Array\n  });\n}\n\nfunction isRawValue(value) {\n  return !value || _typeof(value) !== 'object';\n}\n\nexport default defineComponent({\n  compatConfig: {\n    MODE: 3\n  },\n  name: 'Select',\n  inheritAttrs: false,\n  props: initDefaultProps(selectProps(), {\n    prefixCls: 'vc-select',\n    autoClearSearchValue: true,\n    listHeight: 200,\n    listItemHeight: 20,\n    dropdownMatchSelectWidth: true\n  }),\n  setup: function setup(props, _ref) {\n    var expose = _ref.expose,\n        attrs = _ref.attrs,\n        slots = _ref.slots;\n    var mergedId = useId(toRef(props, 'id'));\n    var multiple = computed(function () {\n      return isMultiple(props.mode);\n    });\n    var childrenAsData = computed(function () {\n      return !!(!props.options && props.children);\n    });\n    var mergedFilterOption = computed(function () {\n      if (props.filterOption === undefined && props.mode === 'combobox') {\n        return false;\n      }\n\n      return props.filterOption;\n    }); // ========================= FieldNames =========================\n\n    var mergedFieldNames = computed(function () {\n      return fillFieldNames(props.fieldNames, childrenAsData.value);\n    }); // =========================== Search ===========================\n\n    var _useMergedState = useMergedState('', {\n      value: computed(function () {\n        return props.searchValue !== undefined ? props.searchValue : props.inputValue;\n      }),\n      postState: function postState(search) {\n        return search || '';\n      }\n    }),\n        _useMergedState2 = _slicedToArray(_useMergedState, 2),\n        mergedSearchValue = _useMergedState2[0],\n        setSearchValue = _useMergedState2[1]; // =========================== Option ===========================\n\n\n    var parsedOptions = useOptions(toRef(props, 'options'), toRef(props, 'children'), mergedFieldNames);\n    var valueOptions = parsedOptions.valueOptions,\n        labelOptions = parsedOptions.labelOptions,\n        mergedOptions = parsedOptions.options; // ========================= Wrap Value =========================\n\n    var convert2LabelValues = function convert2LabelValues(draftValues) {\n      // Convert to array\n      var valueList = toArray(draftValues); // Convert to labelInValue type\n\n      return valueList.map(function (val) {\n        var rawValue;\n        var rawLabel;\n        var rawKey;\n        var rawDisabled; // Fill label & value\n\n        if (isRawValue(val)) {\n          rawValue = val;\n        } else {\n          var _val$value;\n\n          rawKey = val.key;\n          rawLabel = val.label;\n          rawValue = (_val$value = val.value) !== null && _val$value !== void 0 ? _val$value : rawKey;\n        }\n\n        var option = valueOptions.value.get(rawValue);\n\n        if (option) {\n          var _option$key; // Fill missing props\n\n\n          if (rawLabel === undefined) rawLabel = option === null || option === void 0 ? void 0 : option[props.optionLabelProp || mergedFieldNames.value.label];\n          if (rawKey === undefined) rawKey = (_option$key = option === null || option === void 0 ? void 0 : option.key) !== null && _option$key !== void 0 ? _option$key : rawValue;\n          rawDisabled = option === null || option === void 0 ? void 0 : option.disabled; // Warning if label not same as provided\n          // if (process.env.NODE_ENV !== 'production' && !isRawValue(val)) {\n          //   const optionLabel = option?.[mergedFieldNames.value.label];\n          //   if (optionLabel !== undefined && optionLabel !== rawLabel) {\n          //     warning(false, '`label` of `value` is not same as `label` in Select options.');\n          //   }\n          // }\n        }\n\n        return {\n          label: rawLabel,\n          value: rawValue,\n          key: rawKey,\n          disabled: rawDisabled,\n          option: option\n        };\n      });\n    }; // =========================== Values ===========================\n\n\n    var _useMergedState3 = useMergedState(props.defaultValue, {\n      value: toRef(props, 'value')\n    }),\n        _useMergedState4 = _slicedToArray(_useMergedState3, 2),\n        internalValue = _useMergedState4[0],\n        setInternalValue = _useMergedState4[1]; // Merged value with LabelValueType\n\n\n    var rawLabeledValues = computed(function () {\n      var _values$;\n\n      var values = convert2LabelValues(internalValue.value); // combobox no need save value when it's empty\n\n      if (props.mode === 'combobox' && !((_values$ = values[0]) !== null && _values$ !== void 0 && _values$.value)) {\n        return [];\n      }\n\n      return values;\n    }); // Fill label with cache to avoid option remove\n\n    var _useCache = useCache(rawLabeledValues, valueOptions),\n        _useCache2 = _slicedToArray(_useCache, 2),\n        mergedValues = _useCache2[0],\n        getMixedOption = _useCache2[1];\n\n    var displayValues = computed(function () {\n      // `null` need show as placeholder instead\n      // https://github.com/ant-design/ant-design/issues/25057\n      if (!props.mode && mergedValues.value.length === 1) {\n        var firstValue = mergedValues.value[0];\n\n        if (firstValue.value === null && (firstValue.label === null || firstValue.label === undefined)) {\n          return [];\n        }\n      }\n\n      return mergedValues.value.map(function (item) {\n        var _ref2;\n\n        return _objectSpread(_objectSpread({}, item), {}, {\n          label: (_ref2 = typeof item.label === 'function' ? item.label() : item.label) !== null && _ref2 !== void 0 ? _ref2 : item.value\n        });\n      });\n    });\n    /** Convert `displayValues` to raw value type set */\n\n    var rawValues = computed(function () {\n      return new Set(mergedValues.value.map(function (val) {\n        return val.value;\n      }));\n    });\n    watchEffect(function () {\n      if (props.mode === 'combobox') {\n        var _mergedValues$value$;\n\n        var strValue = (_mergedValues$value$ = mergedValues.value[0]) === null || _mergedValues$value$ === void 0 ? void 0 : _mergedValues$value$.value;\n\n        if (strValue !== undefined && strValue !== null) {\n          setSearchValue(String(strValue));\n        }\n      }\n    }, {\n      flush: 'post'\n    }); // ======================= Display Option =======================\n    // Create a placeholder item if not exist in `options`\n\n    var createTagOption = function createTagOption(val, label) {\n      var _ref3;\n\n      var mergedLabel = label !== null && label !== void 0 ? label : val;\n      return _ref3 = {}, _defineProperty(_ref3, mergedFieldNames.value.value, val), _defineProperty(_ref3, mergedFieldNames.value.label, mergedLabel), _ref3;\n    }; // Fill tag as option if mode is `tags`\n\n\n    var filledTagOptions = shallowRef();\n    watchEffect(function () {\n      if (props.mode !== 'tags') {\n        filledTagOptions.value = mergedOptions.value;\n        return;\n      } // >>> Tag mode\n\n\n      var cloneOptions = mergedOptions.value.slice(); // Check if value exist in options (include new patch item)\n\n      var existOptions = function existOptions(val) {\n        return valueOptions.value.has(val);\n      }; // Fill current value as option\n\n\n      _toConsumableArray(mergedValues.value).sort(function (a, b) {\n        return a.value < b.value ? -1 : 1;\n      }).forEach(function (item) {\n        var val = item.value;\n\n        if (!existOptions(val)) {\n          cloneOptions.push(createTagOption(val, item.label));\n        }\n      });\n\n      filledTagOptions.value = cloneOptions;\n    });\n    var filteredOptions = useFilterOptions(filledTagOptions, mergedFieldNames, mergedSearchValue, mergedFilterOption, toRef(props, 'optionFilterProp')); // Fill options with search value if needed\n\n    var filledSearchOptions = computed(function () {\n      if (props.mode !== 'tags' || !mergedSearchValue.value || filteredOptions.value.some(function (item) {\n        return item[props.optionFilterProp || 'value'] === mergedSearchValue.value;\n      })) {\n        return filteredOptions.value;\n      } // Fill search value as option\n\n\n      return [createTagOption(mergedSearchValue.value)].concat(_toConsumableArray(filteredOptions.value));\n    });\n    var orderedFilteredOptions = computed(function () {\n      if (!props.filterSort) {\n        return filledSearchOptions.value;\n      }\n\n      return _toConsumableArray(filledSearchOptions.value).sort(function (a, b) {\n        return props.filterSort(a, b);\n      });\n    });\n    var displayOptions = computed(function () {\n      return flattenOptions(orderedFilteredOptions.value, {\n        fieldNames: mergedFieldNames.value,\n        childrenAsData: childrenAsData.value\n      });\n    }); // =========================== Change ===========================\n\n    var triggerChange = function triggerChange(values) {\n      var labeledValues = convert2LabelValues(values);\n      setInternalValue(labeledValues);\n\n      if (props.onChange && ( // Trigger event only when value changed\n      labeledValues.length !== mergedValues.value.length || labeledValues.some(function (newVal, index) {\n        var _mergedValues$value$i;\n\n        return ((_mergedValues$value$i = mergedValues.value[index]) === null || _mergedValues$value$i === void 0 ? void 0 : _mergedValues$value$i.value) !== (newVal === null || newVal === void 0 ? void 0 : newVal.value);\n      }))) {\n        var returnValues = props.labelInValue ? labeledValues.map(function (v) {\n          return _objectSpread(_objectSpread({}, v), {}, {\n            originLabel: v.label,\n            label: typeof v.label === 'function' ? v.label() : v.label\n          });\n        }) : labeledValues.map(function (v) {\n          return v.value;\n        });\n        var returnOptions = labeledValues.map(function (v) {\n          return injectPropsWithOption(getMixedOption(v.value));\n        });\n        props.onChange( // Value\n        multiple.value ? returnValues : returnValues[0], // Option\n        multiple.value ? returnOptions : returnOptions[0]);\n      }\n    }; // ======================= Accessibility ========================\n\n\n    var _useState = useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        activeValue = _useState2[0],\n        setActiveValue = _useState2[1];\n\n    var _useState3 = useState(0),\n        _useState4 = _slicedToArray(_useState3, 2),\n        accessibilityIndex = _useState4[0],\n        setAccessibilityIndex = _useState4[1];\n\n    var mergedDefaultActiveFirstOption = computed(function () {\n      return props.defaultActiveFirstOption !== undefined ? props.defaultActiveFirstOption : props.mode !== 'combobox';\n    });\n\n    var onActiveValue = function onActiveValue(active, index) {\n      var _ref4 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n          _ref4$source = _ref4.source,\n          source = _ref4$source === void 0 ? 'keyboard' : _ref4$source;\n\n      setAccessibilityIndex(index);\n\n      if (props.backfill && props.mode === 'combobox' && active !== null && source === 'keyboard') {\n        setActiveValue(String(active));\n      }\n    }; // ========================= OptionList =========================\n\n\n    var triggerSelect = function triggerSelect(val, selected) {\n      var getSelectEnt = function getSelectEnt() {\n        var _option$key2;\n\n        var option = getMixedOption(val);\n        var originLabel = option === null || option === void 0 ? void 0 : option[mergedFieldNames.value.label];\n        return [props.labelInValue ? {\n          label: typeof originLabel === 'function' ? originLabel() : originLabel,\n          originLabel: originLabel,\n          value: val,\n          key: (_option$key2 = option === null || option === void 0 ? void 0 : option.key) !== null && _option$key2 !== void 0 ? _option$key2 : val\n        } : val, injectPropsWithOption(option)];\n      };\n\n      if (selected && props.onSelect) {\n        var _getSelectEnt = getSelectEnt(),\n            _getSelectEnt2 = _slicedToArray(_getSelectEnt, 2),\n            wrappedValue = _getSelectEnt2[0],\n            option = _getSelectEnt2[1];\n\n        props.onSelect(wrappedValue, option);\n      } else if (!selected && props.onDeselect) {\n        var _getSelectEnt3 = getSelectEnt(),\n            _getSelectEnt4 = _slicedToArray(_getSelectEnt3, 2),\n            _wrappedValue = _getSelectEnt4[0],\n            _option = _getSelectEnt4[1];\n\n        props.onDeselect(_wrappedValue, _option);\n      }\n    }; // Used for OptionList selection\n\n\n    var onInternalSelect = function onInternalSelect(val, info) {\n      var cloneValues; // Single mode always trigger select only with option list\n\n      var mergedSelect = multiple.value ? info.selected : true;\n\n      if (mergedSelect) {\n        cloneValues = multiple.value ? [].concat(_toConsumableArray(mergedValues.value), [val]) : [val];\n      } else {\n        cloneValues = mergedValues.value.filter(function (v) {\n          return v.value !== val;\n        });\n      }\n\n      triggerChange(cloneValues);\n      triggerSelect(val, mergedSelect); // Clean search value if single or configured\n\n      if (props.mode === 'combobox') {\n        // setSearchValue(String(val));\n        setActiveValue('');\n      } else if (!multiple.value || props.autoClearSearchValue) {\n        setSearchValue('');\n        setActiveValue('');\n      }\n    }; // ======================= Display Change =======================\n    // BaseSelect display values change\n\n\n    var onDisplayValuesChange = function onDisplayValuesChange(nextValues, info) {\n      triggerChange(nextValues);\n\n      if (info.type === 'remove' || info.type === 'clear') {\n        info.values.forEach(function (item) {\n          triggerSelect(item.value, false);\n        });\n      }\n    }; // =========================== Search ===========================\n\n\n    var onInternalSearch = function onInternalSearch(searchText, info) {\n      setSearchValue(searchText);\n      setActiveValue(null); // [Submit] Tag mode should flush input\n\n      if (info.source === 'submit') {\n        var formatted = (searchText || '').trim(); // prevent empty tags from appearing when you click the Enter button\n\n        if (formatted) {\n          var newRawValues = Array.from(new Set([].concat(_toConsumableArray(rawValues.value), [formatted])));\n          triggerChange(newRawValues);\n          triggerSelect(formatted, true);\n          setSearchValue('');\n        }\n\n        return;\n      }\n\n      if (info.source !== 'blur') {\n        var _props$onSearch;\n\n        if (props.mode === 'combobox') {\n          triggerChange(searchText);\n        }\n\n        (_props$onSearch = props.onSearch) === null || _props$onSearch === void 0 ? void 0 : _props$onSearch.call(props, searchText);\n      }\n    };\n\n    var onInternalSearchSplit = function onInternalSearchSplit(words) {\n      var patchValues = words;\n\n      if (props.mode !== 'tags') {\n        patchValues = words.map(function (word) {\n          var opt = labelOptions.value.get(word);\n          return opt === null || opt === void 0 ? void 0 : opt.value;\n        }).filter(function (val) {\n          return val !== undefined;\n        });\n      }\n\n      var newRawValues = Array.from(new Set([].concat(_toConsumableArray(rawValues.value), _toConsumableArray(patchValues))));\n      triggerChange(newRawValues);\n      newRawValues.forEach(function (newRawValue) {\n        triggerSelect(newRawValue, true);\n      });\n    };\n\n    var realVirtual = computed(function () {\n      return props.virtual !== false && props.dropdownMatchSelectWidth !== false;\n    });\n    useProvideSelectProps(toReactive(_objectSpread(_objectSpread({}, parsedOptions), {}, {\n      flattenOptions: displayOptions,\n      onActiveValue: onActiveValue,\n      defaultActiveFirstOption: mergedDefaultActiveFirstOption,\n      onSelect: onInternalSelect,\n      menuItemSelectedIcon: toRef(props, 'menuItemSelectedIcon'),\n      rawValues: rawValues,\n      fieldNames: mergedFieldNames,\n      virtual: realVirtual,\n      listHeight: toRef(props, 'listHeight'),\n      listItemHeight: toRef(props, 'listItemHeight'),\n      childrenAsData: childrenAsData\n    }))); // ========================== Warning ===========================\n\n    if (process.env.NODE_ENV !== 'production') {\n      watchEffect(function () {\n        warningProps(props);\n      }, {\n        flush: 'post'\n      });\n    }\n\n    var selectRef = ref();\n    expose({\n      focus: function focus() {\n        var _selectRef$value;\n\n        (_selectRef$value = selectRef.value) === null || _selectRef$value === void 0 ? void 0 : _selectRef$value.focus();\n      },\n      blur: function blur() {\n        var _selectRef$value2;\n\n        (_selectRef$value2 = selectRef.value) === null || _selectRef$value2 === void 0 ? void 0 : _selectRef$value2.blur();\n      },\n      scrollTo: function scrollTo(arg) {\n        var _selectRef$value3;\n\n        (_selectRef$value3 = selectRef.value) === null || _selectRef$value3 === void 0 ? void 0 : _selectRef$value3.scrollTo(arg);\n      }\n    });\n    var pickProps = computed(function () {\n      return omit(props, ['id', 'mode', 'prefixCls', 'backfill', 'fieldNames', // Search\n      'inputValue', 'searchValue', 'onSearch', 'autoClearSearchValue', // Select\n      'onSelect', 'onDeselect', 'dropdownMatchSelectWidth', // Options\n      'filterOption', 'filterSort', 'optionFilterProp', 'optionLabelProp', 'options', 'children', 'defaultActiveFirstOption', 'menuItemSelectedIcon', 'virtual', 'listHeight', 'listItemHeight', // Value\n      'value', 'defaultValue', 'labelInValue', 'onChange']);\n    });\n    return function () {\n      return _createVNode(BaseSelect, _objectSpread(_objectSpread(_objectSpread({}, pickProps.value), attrs), {}, {\n        \"id\": mergedId,\n        \"prefixCls\": props.prefixCls,\n        \"ref\": selectRef,\n        \"omitDomProps\": OMIT_DOM_PROPS,\n        \"mode\": props.mode,\n        \"displayValues\": displayValues.value,\n        \"onDisplayValuesChange\": onDisplayValuesChange,\n        \"searchValue\": mergedSearchValue.value,\n        \"onSearch\": onInternalSearch,\n        \"onSearchSplit\": onInternalSearchSplit,\n        \"dropdownMatchSelectWidth\": props.dropdownMatchSelectWidth,\n        \"OptionList\": OptionList,\n        \"emptyOptions\": !displayOptions.value.length,\n        \"activeValue\": activeValue.value,\n        \"activeDescendantId\": \"\".concat(mergedId, \"_list_\").concat(accessibilityIndex.value)\n      }), slots);\n    };\n  }\n});","map":{"version":3,"names":["_toConsumableArray","_defineProperty","_slicedToArray","_typeof","_objectSpread","createVNode","_createVNode","resolveDirective","_resolveDirective","BaseSelect","baseSelectPropsWithoutPrivate","isMultiple","OptionList","useOptions","useProvideSelectProps","useId","fillFieldNames","flattenOptions","injectPropsWithOption","warningProps","toArray","useFilterOptions","useCache","computed","defineComponent","ref","shallowRef","toRef","watchEffect","PropTypes","initDefaultProps","useMergedState","useState","toReactive","omit","OMIT_DOM_PROPS","selectProps","prefixCls","String","id","backfill","type","Boolean","default","undefined","fieldNames","Object","inputValue","searchValue","onSearch","Function","autoClearSearchValue","onSelect","onDeselect","filterOption","filterSort","optionFilterProp","optionLabelProp","options","Array","defaultActiveFirstOption","virtual","listHeight","Number","listItemHeight","menuItemSelectedIcon","any","mode","labelInValue","value","defaultValue","onChange","children","isRawValue","compatConfig","MODE","name","inheritAttrs","props","dropdownMatchSelectWidth","setup","_ref","expose","attrs","slots","mergedId","multiple","childrenAsData","mergedFilterOption","mergedFieldNames","_useMergedState","postState","search","_useMergedState2","mergedSearchValue","setSearchValue","parsedOptions","valueOptions","labelOptions","mergedOptions","convert2LabelValues","draftValues","valueList","map","val","rawValue","rawLabel","rawKey","rawDisabled","_val$value","key","label","option","get","_option$key","disabled","_useMergedState3","_useMergedState4","internalValue","setInternalValue","rawLabeledValues","_values$","values","_useCache","_useCache2","mergedValues","getMixedOption","displayValues","length","firstValue","item","_ref2","rawValues","Set","_mergedValues$value$","strValue","flush","createTagOption","_ref3","mergedLabel","filledTagOptions","cloneOptions","slice","existOptions","has","sort","a","b","forEach","push","filteredOptions","filledSearchOptions","some","concat","orderedFilteredOptions","displayOptions","triggerChange","labeledValues","newVal","index","_mergedValues$value$i","returnValues","v","originLabel","returnOptions","_useState","_useState2","activeValue","setActiveValue","_useState3","_useState4","accessibilityIndex","setAccessibilityIndex","mergedDefaultActiveFirstOption","onActiveValue","active","_ref4","arguments","_ref4$source","source","triggerSelect","selected","getSelectEnt","_option$key2","_getSelectEnt","_getSelectEnt2","wrappedValue","_getSelectEnt3","_getSelectEnt4","_wrappedValue","_option","onInternalSelect","info","cloneValues","mergedSelect","filter","onDisplayValuesChange","nextValues","onInternalSearch","searchText","formatted","trim","newRawValues","from","_props$onSearch","call","onInternalSearchSplit","words","patchValues","word","opt","newRawValue","realVirtual","process","env","NODE_ENV","selectRef","focus","_selectRef$value","blur","_selectRef$value2","scrollTo","arg","_selectRef$value3","pickProps"],"sources":["/Users/jasonti/Desktop/Tripper/vue/node_modules/ant-design-vue/es/vc-select/Select.js"],"sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport { createVNode as _createVNode, resolveDirective as _resolveDirective } from \"vue\";\n/**\n * To match accessibility requirement, we always provide an input in the component.\n * Other element will not set `tabindex` to avoid `onBlur` sequence problem.\n * For focused select, we set `aria-live=\"polite\"` to update the accessibility content.\n *\n * ref:\n * - keyboard: https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/listbox_role#Keyboard_interactions\n *\n * New api:\n * - listHeight\n * - listItemHeight\n * - component\n *\n * Remove deprecated api:\n * - multiple\n * - tags\n * - combobox\n * - firstActiveValue\n * - dropdownMenuStyle\n * - openClassName (Not list in api)\n *\n * Update:\n * - `backfill` only support `combobox` mode\n * - `combobox` mode not support `labelInValue` since it's meaningless\n * - `getInputElement` only support `combobox` mode\n * - `onChange` return OptionData instead of ReactNode\n * - `filterOption` `onChange` `onSelect` accept OptionData instead of ReactNode\n * - `combobox` mode trigger `onChange` will get `undefined` if no `value` match in Option\n * - `combobox` mode not support `optionLabelProp`\n */\nimport BaseSelect, { baseSelectPropsWithoutPrivate, isMultiple } from './BaseSelect';\nimport OptionList from './OptionList';\nimport useOptions from './hooks/useOptions';\nimport { useProvideSelectProps } from './SelectContext';\nimport useId from './hooks/useId';\nimport { fillFieldNames, flattenOptions, injectPropsWithOption } from './utils/valueUtil';\nimport warningProps from './utils/warningPropsUtil';\nimport { toArray } from './utils/commonUtil';\nimport useFilterOptions from './hooks/useFilterOptions';\nimport useCache from './hooks/useCache';\nimport { computed, defineComponent, ref, shallowRef, toRef, watchEffect } from 'vue';\nimport PropTypes from '../_util/vue-types';\nimport { initDefaultProps } from '../_util/props-util';\nimport useMergedState from '../_util/hooks/useMergedState';\nimport useState from '../_util/hooks/useState';\nimport { toReactive } from '../_util/toReactive';\nimport omit from '../_util/omit';\nvar OMIT_DOM_PROPS = ['inputValue'];\nexport function selectProps() {\n  return _objectSpread(_objectSpread({}, baseSelectPropsWithoutPrivate()), {}, {\n    prefixCls: String,\n    id: String,\n    backfill: {\n      type: Boolean,\n      default: undefined\n    },\n    // >>> Field Names\n    fieldNames: Object,\n    // >>> Search\n    /** @deprecated Use `searchValue` instead */\n    inputValue: String,\n    searchValue: String,\n    onSearch: Function,\n    autoClearSearchValue: {\n      type: Boolean,\n      default: undefined\n    },\n    // >>> Select\n    onSelect: Function,\n    onDeselect: Function,\n    // >>> Options\n    /**\n     * In Select, `false` means do nothing.\n     * In TreeSelect, `false` will highlight match item.\n     * It's by design.\n     */\n    filterOption: {\n      type: [Boolean, Function],\n      default: undefined\n    },\n    filterSort: Function,\n    optionFilterProp: String,\n    optionLabelProp: String,\n    options: Array,\n    defaultActiveFirstOption: {\n      type: Boolean,\n      default: undefined\n    },\n    virtual: {\n      type: Boolean,\n      default: undefined\n    },\n    listHeight: Number,\n    listItemHeight: Number,\n    // >>> Icon\n    menuItemSelectedIcon: PropTypes.any,\n    mode: String,\n    labelInValue: {\n      type: Boolean,\n      default: undefined\n    },\n    value: PropTypes.any,\n    defaultValue: PropTypes.any,\n    onChange: Function,\n    children: Array\n  });\n}\nfunction isRawValue(value) {\n  return !value || _typeof(value) !== 'object';\n}\nexport default defineComponent({\n  compatConfig: {\n    MODE: 3\n  },\n  name: 'Select',\n  inheritAttrs: false,\n  props: initDefaultProps(selectProps(), {\n    prefixCls: 'vc-select',\n    autoClearSearchValue: true,\n    listHeight: 200,\n    listItemHeight: 20,\n    dropdownMatchSelectWidth: true\n  }),\n  setup: function setup(props, _ref) {\n    var expose = _ref.expose,\n      attrs = _ref.attrs,\n      slots = _ref.slots;\n    var mergedId = useId(toRef(props, 'id'));\n    var multiple = computed(function () {\n      return isMultiple(props.mode);\n    });\n    var childrenAsData = computed(function () {\n      return !!(!props.options && props.children);\n    });\n    var mergedFilterOption = computed(function () {\n      if (props.filterOption === undefined && props.mode === 'combobox') {\n        return false;\n      }\n      return props.filterOption;\n    });\n    // ========================= FieldNames =========================\n    var mergedFieldNames = computed(function () {\n      return fillFieldNames(props.fieldNames, childrenAsData.value);\n    });\n    // =========================== Search ===========================\n    var _useMergedState = useMergedState('', {\n        value: computed(function () {\n          return props.searchValue !== undefined ? props.searchValue : props.inputValue;\n        }),\n        postState: function postState(search) {\n          return search || '';\n        }\n      }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      mergedSearchValue = _useMergedState2[0],\n      setSearchValue = _useMergedState2[1];\n    // =========================== Option ===========================\n    var parsedOptions = useOptions(toRef(props, 'options'), toRef(props, 'children'), mergedFieldNames);\n    var valueOptions = parsedOptions.valueOptions,\n      labelOptions = parsedOptions.labelOptions,\n      mergedOptions = parsedOptions.options;\n    // ========================= Wrap Value =========================\n    var convert2LabelValues = function convert2LabelValues(draftValues) {\n      // Convert to array\n      var valueList = toArray(draftValues);\n      // Convert to labelInValue type\n      return valueList.map(function (val) {\n        var rawValue;\n        var rawLabel;\n        var rawKey;\n        var rawDisabled;\n        // Fill label & value\n        if (isRawValue(val)) {\n          rawValue = val;\n        } else {\n          var _val$value;\n          rawKey = val.key;\n          rawLabel = val.label;\n          rawValue = (_val$value = val.value) !== null && _val$value !== void 0 ? _val$value : rawKey;\n        }\n        var option = valueOptions.value.get(rawValue);\n        if (option) {\n          var _option$key;\n          // Fill missing props\n          if (rawLabel === undefined) rawLabel = option === null || option === void 0 ? void 0 : option[props.optionLabelProp || mergedFieldNames.value.label];\n          if (rawKey === undefined) rawKey = (_option$key = option === null || option === void 0 ? void 0 : option.key) !== null && _option$key !== void 0 ? _option$key : rawValue;\n          rawDisabled = option === null || option === void 0 ? void 0 : option.disabled;\n          // Warning if label not same as provided\n          // if (process.env.NODE_ENV !== 'production' && !isRawValue(val)) {\n          //   const optionLabel = option?.[mergedFieldNames.value.label];\n          //   if (optionLabel !== undefined && optionLabel !== rawLabel) {\n          //     warning(false, '`label` of `value` is not same as `label` in Select options.');\n          //   }\n          // }\n        }\n\n        return {\n          label: rawLabel,\n          value: rawValue,\n          key: rawKey,\n          disabled: rawDisabled,\n          option: option\n        };\n      });\n    };\n    // =========================== Values ===========================\n    var _useMergedState3 = useMergedState(props.defaultValue, {\n        value: toRef(props, 'value')\n      }),\n      _useMergedState4 = _slicedToArray(_useMergedState3, 2),\n      internalValue = _useMergedState4[0],\n      setInternalValue = _useMergedState4[1];\n    // Merged value with LabelValueType\n    var rawLabeledValues = computed(function () {\n      var _values$;\n      var values = convert2LabelValues(internalValue.value);\n      // combobox no need save value when it's empty\n      if (props.mode === 'combobox' && !((_values$ = values[0]) !== null && _values$ !== void 0 && _values$.value)) {\n        return [];\n      }\n      return values;\n    });\n    // Fill label with cache to avoid option remove\n    var _useCache = useCache(rawLabeledValues, valueOptions),\n      _useCache2 = _slicedToArray(_useCache, 2),\n      mergedValues = _useCache2[0],\n      getMixedOption = _useCache2[1];\n    var displayValues = computed(function () {\n      // `null` need show as placeholder instead\n      // https://github.com/ant-design/ant-design/issues/25057\n      if (!props.mode && mergedValues.value.length === 1) {\n        var firstValue = mergedValues.value[0];\n        if (firstValue.value === null && (firstValue.label === null || firstValue.label === undefined)) {\n          return [];\n        }\n      }\n      return mergedValues.value.map(function (item) {\n        var _ref2;\n        return _objectSpread(_objectSpread({}, item), {}, {\n          label: (_ref2 = typeof item.label === 'function' ? item.label() : item.label) !== null && _ref2 !== void 0 ? _ref2 : item.value\n        });\n      });\n    });\n    /** Convert `displayValues` to raw value type set */\n    var rawValues = computed(function () {\n      return new Set(mergedValues.value.map(function (val) {\n        return val.value;\n      }));\n    });\n    watchEffect(function () {\n      if (props.mode === 'combobox') {\n        var _mergedValues$value$;\n        var strValue = (_mergedValues$value$ = mergedValues.value[0]) === null || _mergedValues$value$ === void 0 ? void 0 : _mergedValues$value$.value;\n        if (strValue !== undefined && strValue !== null) {\n          setSearchValue(String(strValue));\n        }\n      }\n    }, {\n      flush: 'post'\n    });\n    // ======================= Display Option =======================\n    // Create a placeholder item if not exist in `options`\n    var createTagOption = function createTagOption(val, label) {\n      var _ref3;\n      var mergedLabel = label !== null && label !== void 0 ? label : val;\n      return _ref3 = {}, _defineProperty(_ref3, mergedFieldNames.value.value, val), _defineProperty(_ref3, mergedFieldNames.value.label, mergedLabel), _ref3;\n    };\n    // Fill tag as option if mode is `tags`\n    var filledTagOptions = shallowRef();\n    watchEffect(function () {\n      if (props.mode !== 'tags') {\n        filledTagOptions.value = mergedOptions.value;\n        return;\n      }\n      // >>> Tag mode\n      var cloneOptions = mergedOptions.value.slice();\n      // Check if value exist in options (include new patch item)\n      var existOptions = function existOptions(val) {\n        return valueOptions.value.has(val);\n      };\n      // Fill current value as option\n      _toConsumableArray(mergedValues.value).sort(function (a, b) {\n        return a.value < b.value ? -1 : 1;\n      }).forEach(function (item) {\n        var val = item.value;\n        if (!existOptions(val)) {\n          cloneOptions.push(createTagOption(val, item.label));\n        }\n      });\n      filledTagOptions.value = cloneOptions;\n    });\n    var filteredOptions = useFilterOptions(filledTagOptions, mergedFieldNames, mergedSearchValue, mergedFilterOption, toRef(props, 'optionFilterProp'));\n    // Fill options with search value if needed\n    var filledSearchOptions = computed(function () {\n      if (props.mode !== 'tags' || !mergedSearchValue.value || filteredOptions.value.some(function (item) {\n        return item[props.optionFilterProp || 'value'] === mergedSearchValue.value;\n      })) {\n        return filteredOptions.value;\n      }\n      // Fill search value as option\n      return [createTagOption(mergedSearchValue.value)].concat(_toConsumableArray(filteredOptions.value));\n    });\n    var orderedFilteredOptions = computed(function () {\n      if (!props.filterSort) {\n        return filledSearchOptions.value;\n      }\n      return _toConsumableArray(filledSearchOptions.value).sort(function (a, b) {\n        return props.filterSort(a, b);\n      });\n    });\n    var displayOptions = computed(function () {\n      return flattenOptions(orderedFilteredOptions.value, {\n        fieldNames: mergedFieldNames.value,\n        childrenAsData: childrenAsData.value\n      });\n    });\n    // =========================== Change ===========================\n    var triggerChange = function triggerChange(values) {\n      var labeledValues = convert2LabelValues(values);\n      setInternalValue(labeledValues);\n      if (props.onChange && (\n      // Trigger event only when value changed\n      labeledValues.length !== mergedValues.value.length || labeledValues.some(function (newVal, index) {\n        var _mergedValues$value$i;\n        return ((_mergedValues$value$i = mergedValues.value[index]) === null || _mergedValues$value$i === void 0 ? void 0 : _mergedValues$value$i.value) !== (newVal === null || newVal === void 0 ? void 0 : newVal.value);\n      }))) {\n        var returnValues = props.labelInValue ? labeledValues.map(function (v) {\n          return _objectSpread(_objectSpread({}, v), {}, {\n            originLabel: v.label,\n            label: typeof v.label === 'function' ? v.label() : v.label\n          });\n        }) : labeledValues.map(function (v) {\n          return v.value;\n        });\n        var returnOptions = labeledValues.map(function (v) {\n          return injectPropsWithOption(getMixedOption(v.value));\n        });\n        props.onChange(\n        // Value\n        multiple.value ? returnValues : returnValues[0],\n        // Option\n        multiple.value ? returnOptions : returnOptions[0]);\n      }\n    };\n    // ======================= Accessibility ========================\n    var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      activeValue = _useState2[0],\n      setActiveValue = _useState2[1];\n    var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      accessibilityIndex = _useState4[0],\n      setAccessibilityIndex = _useState4[1];\n    var mergedDefaultActiveFirstOption = computed(function () {\n      return props.defaultActiveFirstOption !== undefined ? props.defaultActiveFirstOption : props.mode !== 'combobox';\n    });\n    var onActiveValue = function onActiveValue(active, index) {\n      var _ref4 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n        _ref4$source = _ref4.source,\n        source = _ref4$source === void 0 ? 'keyboard' : _ref4$source;\n      setAccessibilityIndex(index);\n      if (props.backfill && props.mode === 'combobox' && active !== null && source === 'keyboard') {\n        setActiveValue(String(active));\n      }\n    };\n    // ========================= OptionList =========================\n    var triggerSelect = function triggerSelect(val, selected) {\n      var getSelectEnt = function getSelectEnt() {\n        var _option$key2;\n        var option = getMixedOption(val);\n        var originLabel = option === null || option === void 0 ? void 0 : option[mergedFieldNames.value.label];\n        return [props.labelInValue ? {\n          label: typeof originLabel === 'function' ? originLabel() : originLabel,\n          originLabel: originLabel,\n          value: val,\n          key: (_option$key2 = option === null || option === void 0 ? void 0 : option.key) !== null && _option$key2 !== void 0 ? _option$key2 : val\n        } : val, injectPropsWithOption(option)];\n      };\n      if (selected && props.onSelect) {\n        var _getSelectEnt = getSelectEnt(),\n          _getSelectEnt2 = _slicedToArray(_getSelectEnt, 2),\n          wrappedValue = _getSelectEnt2[0],\n          option = _getSelectEnt2[1];\n        props.onSelect(wrappedValue, option);\n      } else if (!selected && props.onDeselect) {\n        var _getSelectEnt3 = getSelectEnt(),\n          _getSelectEnt4 = _slicedToArray(_getSelectEnt3, 2),\n          _wrappedValue = _getSelectEnt4[0],\n          _option = _getSelectEnt4[1];\n        props.onDeselect(_wrappedValue, _option);\n      }\n    };\n    // Used for OptionList selection\n    var onInternalSelect = function onInternalSelect(val, info) {\n      var cloneValues;\n      // Single mode always trigger select only with option list\n      var mergedSelect = multiple.value ? info.selected : true;\n      if (mergedSelect) {\n        cloneValues = multiple.value ? [].concat(_toConsumableArray(mergedValues.value), [val]) : [val];\n      } else {\n        cloneValues = mergedValues.value.filter(function (v) {\n          return v.value !== val;\n        });\n      }\n      triggerChange(cloneValues);\n      triggerSelect(val, mergedSelect);\n      // Clean search value if single or configured\n      if (props.mode === 'combobox') {\n        // setSearchValue(String(val));\n        setActiveValue('');\n      } else if (!multiple.value || props.autoClearSearchValue) {\n        setSearchValue('');\n        setActiveValue('');\n      }\n    };\n    // ======================= Display Change =======================\n    // BaseSelect display values change\n    var onDisplayValuesChange = function onDisplayValuesChange(nextValues, info) {\n      triggerChange(nextValues);\n      if (info.type === 'remove' || info.type === 'clear') {\n        info.values.forEach(function (item) {\n          triggerSelect(item.value, false);\n        });\n      }\n    };\n    // =========================== Search ===========================\n    var onInternalSearch = function onInternalSearch(searchText, info) {\n      setSearchValue(searchText);\n      setActiveValue(null);\n      // [Submit] Tag mode should flush input\n      if (info.source === 'submit') {\n        var formatted = (searchText || '').trim();\n        // prevent empty tags from appearing when you click the Enter button\n        if (formatted) {\n          var newRawValues = Array.from(new Set([].concat(_toConsumableArray(rawValues.value), [formatted])));\n          triggerChange(newRawValues);\n          triggerSelect(formatted, true);\n          setSearchValue('');\n        }\n        return;\n      }\n      if (info.source !== 'blur') {\n        var _props$onSearch;\n        if (props.mode === 'combobox') {\n          triggerChange(searchText);\n        }\n        (_props$onSearch = props.onSearch) === null || _props$onSearch === void 0 ? void 0 : _props$onSearch.call(props, searchText);\n      }\n    };\n    var onInternalSearchSplit = function onInternalSearchSplit(words) {\n      var patchValues = words;\n      if (props.mode !== 'tags') {\n        patchValues = words.map(function (word) {\n          var opt = labelOptions.value.get(word);\n          return opt === null || opt === void 0 ? void 0 : opt.value;\n        }).filter(function (val) {\n          return val !== undefined;\n        });\n      }\n      var newRawValues = Array.from(new Set([].concat(_toConsumableArray(rawValues.value), _toConsumableArray(patchValues))));\n      triggerChange(newRawValues);\n      newRawValues.forEach(function (newRawValue) {\n        triggerSelect(newRawValue, true);\n      });\n    };\n    var realVirtual = computed(function () {\n      return props.virtual !== false && props.dropdownMatchSelectWidth !== false;\n    });\n    useProvideSelectProps(toReactive(_objectSpread(_objectSpread({}, parsedOptions), {}, {\n      flattenOptions: displayOptions,\n      onActiveValue: onActiveValue,\n      defaultActiveFirstOption: mergedDefaultActiveFirstOption,\n      onSelect: onInternalSelect,\n      menuItemSelectedIcon: toRef(props, 'menuItemSelectedIcon'),\n      rawValues: rawValues,\n      fieldNames: mergedFieldNames,\n      virtual: realVirtual,\n      listHeight: toRef(props, 'listHeight'),\n      listItemHeight: toRef(props, 'listItemHeight'),\n      childrenAsData: childrenAsData\n    })));\n    // ========================== Warning ===========================\n    if (process.env.NODE_ENV !== 'production') {\n      watchEffect(function () {\n        warningProps(props);\n      }, {\n        flush: 'post'\n      });\n    }\n    var selectRef = ref();\n    expose({\n      focus: function focus() {\n        var _selectRef$value;\n        (_selectRef$value = selectRef.value) === null || _selectRef$value === void 0 ? void 0 : _selectRef$value.focus();\n      },\n      blur: function blur() {\n        var _selectRef$value2;\n        (_selectRef$value2 = selectRef.value) === null || _selectRef$value2 === void 0 ? void 0 : _selectRef$value2.blur();\n      },\n      scrollTo: function scrollTo(arg) {\n        var _selectRef$value3;\n        (_selectRef$value3 = selectRef.value) === null || _selectRef$value3 === void 0 ? void 0 : _selectRef$value3.scrollTo(arg);\n      }\n    });\n    var pickProps = computed(function () {\n      return omit(props, ['id', 'mode', 'prefixCls', 'backfill', 'fieldNames',\n      // Search\n      'inputValue', 'searchValue', 'onSearch', 'autoClearSearchValue',\n      // Select\n      'onSelect', 'onDeselect', 'dropdownMatchSelectWidth',\n      // Options\n      'filterOption', 'filterSort', 'optionFilterProp', 'optionLabelProp', 'options', 'children', 'defaultActiveFirstOption', 'menuItemSelectedIcon', 'virtual', 'listHeight', 'listItemHeight',\n      // Value\n      'value', 'defaultValue', 'labelInValue', 'onChange']);\n    });\n    return function () {\n      return _createVNode(BaseSelect, _objectSpread(_objectSpread(_objectSpread({}, pickProps.value), attrs), {}, {\n        \"id\": mergedId,\n        \"prefixCls\": props.prefixCls,\n        \"ref\": selectRef,\n        \"omitDomProps\": OMIT_DOM_PROPS,\n        \"mode\": props.mode,\n        \"displayValues\": displayValues.value,\n        \"onDisplayValuesChange\": onDisplayValuesChange,\n        \"searchValue\": mergedSearchValue.value,\n        \"onSearch\": onInternalSearch,\n        \"onSearchSplit\": onInternalSearchSplit,\n        \"dropdownMatchSelectWidth\": props.dropdownMatchSelectWidth,\n        \"OptionList\": OptionList,\n        \"emptyOptions\": !displayOptions.value.length,\n        \"activeValue\": activeValue.value,\n        \"activeDescendantId\": \"\".concat(mergedId, \"_list_\").concat(accessibilityIndex.value)\n      }), slots);\n    };\n  }\n});"],"mappings":"AAAA,OAAOA,kBAAP,MAA+B,8CAA/B;AACA,OAAOC,eAAP,MAA4B,2CAA5B;AACA,OAAOC,cAAP,MAA2B,0CAA3B;AACA,OAAOC,OAAP,MAAoB,mCAApB;AACA,OAAOC,aAAP,MAA0B,0CAA1B;AACA,SAASC,WAAW,IAAIC,YAAxB,EAAsCC,gBAAgB,IAAIC,iBAA1D,QAAmF,KAAnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAOC,UAAP,IAAqBC,6BAArB,EAAoDC,UAApD,QAAsE,cAAtE;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,UAAP,MAAuB,oBAAvB;AACA,SAASC,qBAAT,QAAsC,iBAAtC;AACA,OAAOC,KAAP,MAAkB,eAAlB;AACA,SAASC,cAAT,EAAyBC,cAAzB,EAAyCC,qBAAzC,QAAsE,mBAAtE;AACA,OAAOC,YAAP,MAAyB,0BAAzB;AACA,SAASC,OAAT,QAAwB,oBAAxB;AACA,OAAOC,gBAAP,MAA6B,0BAA7B;AACA,OAAOC,QAAP,MAAqB,kBAArB;AACA,SAASC,QAAT,EAAmBC,eAAnB,EAAoCC,GAApC,EAAyCC,UAAzC,EAAqDC,KAArD,EAA4DC,WAA5D,QAA+E,KAA/E;AACA,OAAOC,SAAP,MAAsB,oBAAtB;AACA,SAASC,gBAAT,QAAiC,qBAAjC;AACA,OAAOC,cAAP,MAA2B,+BAA3B;AACA,OAAOC,QAAP,MAAqB,yBAArB;AACA,SAASC,UAAT,QAA2B,qBAA3B;AACA,OAAOC,IAAP,MAAiB,eAAjB;AACA,IAAIC,cAAc,GAAG,CAAC,YAAD,CAArB;AACA,OAAO,SAASC,WAAT,GAAuB;EAC5B,OAAOhC,aAAa,CAACA,aAAa,CAAC,EAAD,EAAKM,6BAA6B,EAAlC,CAAd,EAAqD,EAArD,EAAyD;IAC3E2B,SAAS,EAAEC,MADgE;IAE3EC,EAAE,EAAED,MAFuE;IAG3EE,QAAQ,EAAE;MACRC,IAAI,EAAEC,OADE;MAERC,OAAO,EAAEC;IAFD,CAHiE;IAO3E;IACAC,UAAU,EAAEC,MAR+D;IAS3E;;IACA;IACAC,UAAU,EAAET,MAX+D;IAY3EU,WAAW,EAAEV,MAZ8D;IAa3EW,QAAQ,EAAEC,QAbiE;IAc3EC,oBAAoB,EAAE;MACpBV,IAAI,EAAEC,OADc;MAEpBC,OAAO,EAAEC;IAFW,CAdqD;IAkB3E;IACAQ,QAAQ,EAAEF,QAnBiE;IAoB3EG,UAAU,EAAEH,QApB+D;IAqB3E;;IACA;AACJ;AACA;AACA;AACA;IACII,YAAY,EAAE;MACZb,IAAI,EAAE,CAACC,OAAD,EAAUQ,QAAV,CADM;MAEZP,OAAO,EAAEC;IAFG,CA3B6D;IA+B3EW,UAAU,EAAEL,QA/B+D;IAgC3EM,gBAAgB,EAAElB,MAhCyD;IAiC3EmB,eAAe,EAAEnB,MAjC0D;IAkC3EoB,OAAO,EAAEC,KAlCkE;IAmC3EC,wBAAwB,EAAE;MACxBnB,IAAI,EAAEC,OADkB;MAExBC,OAAO,EAAEC;IAFe,CAnCiD;IAuC3EiB,OAAO,EAAE;MACPpB,IAAI,EAAEC,OADC;MAEPC,OAAO,EAAEC;IAFF,CAvCkE;IA2C3EkB,UAAU,EAAEC,MA3C+D;IA4C3EC,cAAc,EAAED,MA5C2D;IA6C3E;IACAE,oBAAoB,EAAEpC,SAAS,CAACqC,GA9C2C;IA+C3EC,IAAI,EAAE7B,MA/CqE;IAgD3E8B,YAAY,EAAE;MACZ3B,IAAI,EAAEC,OADM;MAEZC,OAAO,EAAEC;IAFG,CAhD6D;IAoD3EyB,KAAK,EAAExC,SAAS,CAACqC,GApD0D;IAqD3EI,YAAY,EAAEzC,SAAS,CAACqC,GArDmD;IAsD3EK,QAAQ,EAAErB,QAtDiE;IAuD3EsB,QAAQ,EAAEb;EAvDiE,CAAzD,CAApB;AAyDD;;AACD,SAASc,UAAT,CAAoBJ,KAApB,EAA2B;EACzB,OAAO,CAACA,KAAD,IAAUlE,OAAO,CAACkE,KAAD,CAAP,KAAmB,QAApC;AACD;;AACD,eAAe7C,eAAe,CAAC;EAC7BkD,YAAY,EAAE;IACZC,IAAI,EAAE;EADM,CADe;EAI7BC,IAAI,EAAE,QAJuB;EAK7BC,YAAY,EAAE,KALe;EAM7BC,KAAK,EAAEhD,gBAAgB,CAACM,WAAW,EAAZ,EAAgB;IACrCC,SAAS,EAAE,WAD0B;IAErCc,oBAAoB,EAAE,IAFe;IAGrCW,UAAU,EAAE,GAHyB;IAIrCE,cAAc,EAAE,EAJqB;IAKrCe,wBAAwB,EAAE;EALW,CAAhB,CANM;EAa7BC,KAAK,EAAE,SAASA,KAAT,CAAeF,KAAf,EAAsBG,IAAtB,EAA4B;IACjC,IAAIC,MAAM,GAAGD,IAAI,CAACC,MAAlB;IAAA,IACEC,KAAK,GAAGF,IAAI,CAACE,KADf;IAAA,IAEEC,KAAK,GAAGH,IAAI,CAACG,KAFf;IAGA,IAAIC,QAAQ,GAAGtE,KAAK,CAACY,KAAK,CAACmD,KAAD,EAAQ,IAAR,CAAN,CAApB;IACA,IAAIQ,QAAQ,GAAG/D,QAAQ,CAAC,YAAY;MAClC,OAAOZ,UAAU,CAACmE,KAAK,CAACX,IAAP,CAAjB;IACD,CAFsB,CAAvB;IAGA,IAAIoB,cAAc,GAAGhE,QAAQ,CAAC,YAAY;MACxC,OAAO,CAAC,EAAE,CAACuD,KAAK,CAACpB,OAAP,IAAkBoB,KAAK,CAACN,QAA1B,CAAR;IACD,CAF4B,CAA7B;IAGA,IAAIgB,kBAAkB,GAAGjE,QAAQ,CAAC,YAAY;MAC5C,IAAIuD,KAAK,CAACxB,YAAN,KAAuBV,SAAvB,IAAoCkC,KAAK,CAACX,IAAN,KAAe,UAAvD,EAAmE;QACjE,OAAO,KAAP;MACD;;MACD,OAAOW,KAAK,CAACxB,YAAb;IACD,CALgC,CAAjC,CAXiC,CAiBjC;;IACA,IAAImC,gBAAgB,GAAGlE,QAAQ,CAAC,YAAY;MAC1C,OAAOP,cAAc,CAAC8D,KAAK,CAACjC,UAAP,EAAmB0C,cAAc,CAAClB,KAAlC,CAArB;IACD,CAF8B,CAA/B,CAlBiC,CAqBjC;;IACA,IAAIqB,eAAe,GAAG3D,cAAc,CAAC,EAAD,EAAK;MACrCsC,KAAK,EAAE9C,QAAQ,CAAC,YAAY;QAC1B,OAAOuD,KAAK,CAAC9B,WAAN,KAAsBJ,SAAtB,GAAkCkC,KAAK,CAAC9B,WAAxC,GAAsD8B,KAAK,CAAC/B,UAAnE;MACD,CAFc,CADsB;MAIrC4C,SAAS,EAAE,SAASA,SAAT,CAAmBC,MAAnB,EAA2B;QACpC,OAAOA,MAAM,IAAI,EAAjB;MACD;IANoC,CAAL,CAApC;IAAA,IAQEC,gBAAgB,GAAG3F,cAAc,CAACwF,eAAD,EAAkB,CAAlB,CARnC;IAAA,IASEI,iBAAiB,GAAGD,gBAAgB,CAAC,CAAD,CATtC;IAAA,IAUEE,cAAc,GAAGF,gBAAgB,CAAC,CAAD,CAVnC,CAtBiC,CAiCjC;;;IACA,IAAIG,aAAa,GAAGnF,UAAU,CAACc,KAAK,CAACmD,KAAD,EAAQ,SAAR,CAAN,EAA0BnD,KAAK,CAACmD,KAAD,EAAQ,UAAR,CAA/B,EAAoDW,gBAApD,CAA9B;IACA,IAAIQ,YAAY,GAAGD,aAAa,CAACC,YAAjC;IAAA,IACEC,YAAY,GAAGF,aAAa,CAACE,YAD/B;IAAA,IAEEC,aAAa,GAAGH,aAAa,CAACtC,OAFhC,CAnCiC,CAsCjC;;IACA,IAAI0C,mBAAmB,GAAG,SAASA,mBAAT,CAA6BC,WAA7B,EAA0C;MAClE;MACA,IAAIC,SAAS,GAAGlF,OAAO,CAACiF,WAAD,CAAvB,CAFkE,CAGlE;;MACA,OAAOC,SAAS,CAACC,GAAV,CAAc,UAAUC,GAAV,EAAe;QAClC,IAAIC,QAAJ;QACA,IAAIC,QAAJ;QACA,IAAIC,MAAJ;QACA,IAAIC,WAAJ,CAJkC,CAKlC;;QACA,IAAInC,UAAU,CAAC+B,GAAD,CAAd,EAAqB;UACnBC,QAAQ,GAAGD,GAAX;QACD,CAFD,MAEO;UACL,IAAIK,UAAJ;;UACAF,MAAM,GAAGH,GAAG,CAACM,GAAb;UACAJ,QAAQ,GAAGF,GAAG,CAACO,KAAf;UACAN,QAAQ,GAAG,CAACI,UAAU,GAAGL,GAAG,CAACnC,KAAlB,MAA6B,IAA7B,IAAqCwC,UAAU,KAAK,KAAK,CAAzD,GAA6DA,UAA7D,GAA0EF,MAArF;QACD;;QACD,IAAIK,MAAM,GAAGf,YAAY,CAAC5B,KAAb,CAAmB4C,GAAnB,CAAuBR,QAAvB,CAAb;;QACA,IAAIO,MAAJ,EAAY;UACV,IAAIE,WAAJ,CADU,CAEV;;;UACA,IAAIR,QAAQ,KAAK9D,SAAjB,EAA4B8D,QAAQ,GAAGM,MAAM,KAAK,IAAX,IAAmBA,MAAM,KAAK,KAAK,CAAnC,GAAuC,KAAK,CAA5C,GAAgDA,MAAM,CAAClC,KAAK,CAACrB,eAAN,IAAyBgC,gBAAgB,CAACpB,KAAjB,CAAuB0C,KAAjD,CAAjE;UAC5B,IAAIJ,MAAM,KAAK/D,SAAf,EAA0B+D,MAAM,GAAG,CAACO,WAAW,GAAGF,MAAM,KAAK,IAAX,IAAmBA,MAAM,KAAK,KAAK,CAAnC,GAAuC,KAAK,CAA5C,GAAgDA,MAAM,CAACF,GAAtE,MAA+E,IAA/E,IAAuFI,WAAW,KAAK,KAAK,CAA5G,GAAgHA,WAAhH,GAA8HT,QAAvI;UAC1BG,WAAW,GAAGI,MAAM,KAAK,IAAX,IAAmBA,MAAM,KAAK,KAAK,CAAnC,GAAuC,KAAK,CAA5C,GAAgDA,MAAM,CAACG,QAArE,CALU,CAMV;UACA;UACA;UACA;UACA;UACA;UACA;QACD;;QAED,OAAO;UACLJ,KAAK,EAAEL,QADF;UAELrC,KAAK,EAAEoC,QAFF;UAGLK,GAAG,EAAEH,MAHA;UAILQ,QAAQ,EAAEP,WAJL;UAKLI,MAAM,EAAEA;QALH,CAAP;MAOD,CArCM,CAAP;IAsCD,CA1CD,CAvCiC,CAkFjC;;;IACA,IAAII,gBAAgB,GAAGrF,cAAc,CAAC+C,KAAK,CAACR,YAAP,EAAqB;MACtDD,KAAK,EAAE1C,KAAK,CAACmD,KAAD,EAAQ,OAAR;IAD0C,CAArB,CAArC;IAAA,IAGEuC,gBAAgB,GAAGnH,cAAc,CAACkH,gBAAD,EAAmB,CAAnB,CAHnC;IAAA,IAIEE,aAAa,GAAGD,gBAAgB,CAAC,CAAD,CAJlC;IAAA,IAKEE,gBAAgB,GAAGF,gBAAgB,CAAC,CAAD,CALrC,CAnFiC,CAyFjC;;;IACA,IAAIG,gBAAgB,GAAGjG,QAAQ,CAAC,YAAY;MAC1C,IAAIkG,QAAJ;;MACA,IAAIC,MAAM,GAAGtB,mBAAmB,CAACkB,aAAa,CAACjD,KAAf,CAAhC,CAF0C,CAG1C;;MACA,IAAIS,KAAK,CAACX,IAAN,KAAe,UAAf,IAA6B,EAAE,CAACsD,QAAQ,GAAGC,MAAM,CAAC,CAAD,CAAlB,MAA2B,IAA3B,IAAmCD,QAAQ,KAAK,KAAK,CAArD,IAA0DA,QAAQ,CAACpD,KAArE,CAAjC,EAA8G;QAC5G,OAAO,EAAP;MACD;;MACD,OAAOqD,MAAP;IACD,CAR8B,CAA/B,CA1FiC,CAmGjC;;IACA,IAAIC,SAAS,GAAGrG,QAAQ,CAACkG,gBAAD,EAAmBvB,YAAnB,CAAxB;IAAA,IACE2B,UAAU,GAAG1H,cAAc,CAACyH,SAAD,EAAY,CAAZ,CAD7B;IAAA,IAEEE,YAAY,GAAGD,UAAU,CAAC,CAAD,CAF3B;IAAA,IAGEE,cAAc,GAAGF,UAAU,CAAC,CAAD,CAH7B;;IAIA,IAAIG,aAAa,GAAGxG,QAAQ,CAAC,YAAY;MACvC;MACA;MACA,IAAI,CAACuD,KAAK,CAACX,IAAP,IAAe0D,YAAY,CAACxD,KAAb,CAAmB2D,MAAnB,KAA8B,CAAjD,EAAoD;QAClD,IAAIC,UAAU,GAAGJ,YAAY,CAACxD,KAAb,CAAmB,CAAnB,CAAjB;;QACA,IAAI4D,UAAU,CAAC5D,KAAX,KAAqB,IAArB,KAA8B4D,UAAU,CAAClB,KAAX,KAAqB,IAArB,IAA6BkB,UAAU,CAAClB,KAAX,KAAqBnE,SAAhF,CAAJ,EAAgG;UAC9F,OAAO,EAAP;QACD;MACF;;MACD,OAAOiF,YAAY,CAACxD,KAAb,CAAmBkC,GAAnB,CAAuB,UAAU2B,IAAV,EAAgB;QAC5C,IAAIC,KAAJ;;QACA,OAAO/H,aAAa,CAACA,aAAa,CAAC,EAAD,EAAK8H,IAAL,CAAd,EAA0B,EAA1B,EAA8B;UAChDnB,KAAK,EAAE,CAACoB,KAAK,GAAG,OAAOD,IAAI,CAACnB,KAAZ,KAAsB,UAAtB,GAAmCmB,IAAI,CAACnB,KAAL,EAAnC,GAAkDmB,IAAI,CAACnB,KAAhE,MAA2E,IAA3E,IAAmFoB,KAAK,KAAK,KAAK,CAAlG,GAAsGA,KAAtG,GAA8GD,IAAI,CAAC7D;QAD1E,CAA9B,CAApB;MAGD,CALM,CAAP;IAMD,CAf2B,CAA5B;IAgBA;;IACA,IAAI+D,SAAS,GAAG7G,QAAQ,CAAC,YAAY;MACnC,OAAO,IAAI8G,GAAJ,CAAQR,YAAY,CAACxD,KAAb,CAAmBkC,GAAnB,CAAuB,UAAUC,GAAV,EAAe;QACnD,OAAOA,GAAG,CAACnC,KAAX;MACD,CAFc,CAAR,CAAP;IAGD,CAJuB,CAAxB;IAKAzC,WAAW,CAAC,YAAY;MACtB,IAAIkD,KAAK,CAACX,IAAN,KAAe,UAAnB,EAA+B;QAC7B,IAAImE,oBAAJ;;QACA,IAAIC,QAAQ,GAAG,CAACD,oBAAoB,GAAGT,YAAY,CAACxD,KAAb,CAAmB,CAAnB,CAAxB,MAAmD,IAAnD,IAA2DiE,oBAAoB,KAAK,KAAK,CAAzF,GAA6F,KAAK,CAAlG,GAAsGA,oBAAoB,CAACjE,KAA1I;;QACA,IAAIkE,QAAQ,KAAK3F,SAAb,IAA0B2F,QAAQ,KAAK,IAA3C,EAAiD;UAC/CxC,cAAc,CAACzD,MAAM,CAACiG,QAAD,CAAP,CAAd;QACD;MACF;IACF,CARU,EAQR;MACDC,KAAK,EAAE;IADN,CARQ,CAAX,CA9HiC,CAyIjC;IACA;;IACA,IAAIC,eAAe,GAAG,SAASA,eAAT,CAAyBjC,GAAzB,EAA8BO,KAA9B,EAAqC;MACzD,IAAI2B,KAAJ;;MACA,IAAIC,WAAW,GAAG5B,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqCA,KAArC,GAA6CP,GAA/D;MACA,OAAOkC,KAAK,GAAG,EAAR,EAAYzI,eAAe,CAACyI,KAAD,EAAQjD,gBAAgB,CAACpB,KAAjB,CAAuBA,KAA/B,EAAsCmC,GAAtC,CAA3B,EAAuEvG,eAAe,CAACyI,KAAD,EAAQjD,gBAAgB,CAACpB,KAAjB,CAAuB0C,KAA/B,EAAsC4B,WAAtC,CAAtF,EAA0ID,KAAjJ;IACD,CAJD,CA3IiC,CAgJjC;;;IACA,IAAIE,gBAAgB,GAAGlH,UAAU,EAAjC;IACAE,WAAW,CAAC,YAAY;MACtB,IAAIkD,KAAK,CAACX,IAAN,KAAe,MAAnB,EAA2B;QACzByE,gBAAgB,CAACvE,KAAjB,GAAyB8B,aAAa,CAAC9B,KAAvC;QACA;MACD,CAJqB,CAKtB;;;MACA,IAAIwE,YAAY,GAAG1C,aAAa,CAAC9B,KAAd,CAAoByE,KAApB,EAAnB,CANsB,CAOtB;;MACA,IAAIC,YAAY,GAAG,SAASA,YAAT,CAAsBvC,GAAtB,EAA2B;QAC5C,OAAOP,YAAY,CAAC5B,KAAb,CAAmB2E,GAAnB,CAAuBxC,GAAvB,CAAP;MACD,CAFD,CARsB,CAWtB;;;MACAxG,kBAAkB,CAAC6H,YAAY,CAACxD,KAAd,CAAlB,CAAuC4E,IAAvC,CAA4C,UAAUC,CAAV,EAAaC,CAAb,EAAgB;QAC1D,OAAOD,CAAC,CAAC7E,KAAF,GAAU8E,CAAC,CAAC9E,KAAZ,GAAoB,CAAC,CAArB,GAAyB,CAAhC;MACD,CAFD,EAEG+E,OAFH,CAEW,UAAUlB,IAAV,EAAgB;QACzB,IAAI1B,GAAG,GAAG0B,IAAI,CAAC7D,KAAf;;QACA,IAAI,CAAC0E,YAAY,CAACvC,GAAD,CAAjB,EAAwB;UACtBqC,YAAY,CAACQ,IAAb,CAAkBZ,eAAe,CAACjC,GAAD,EAAM0B,IAAI,CAACnB,KAAX,CAAjC;QACD;MACF,CAPD;;MAQA6B,gBAAgB,CAACvE,KAAjB,GAAyBwE,YAAzB;IACD,CArBU,CAAX;IAsBA,IAAIS,eAAe,GAAGjI,gBAAgB,CAACuH,gBAAD,EAAmBnD,gBAAnB,EAAqCK,iBAArC,EAAwDN,kBAAxD,EAA4E7D,KAAK,CAACmD,KAAD,EAAQ,kBAAR,CAAjF,CAAtC,CAxKiC,CAyKjC;;IACA,IAAIyE,mBAAmB,GAAGhI,QAAQ,CAAC,YAAY;MAC7C,IAAIuD,KAAK,CAACX,IAAN,KAAe,MAAf,IAAyB,CAAC2B,iBAAiB,CAACzB,KAA5C,IAAqDiF,eAAe,CAACjF,KAAhB,CAAsBmF,IAAtB,CAA2B,UAAUtB,IAAV,EAAgB;QAClG,OAAOA,IAAI,CAACpD,KAAK,CAACtB,gBAAN,IAA0B,OAA3B,CAAJ,KAA4CsC,iBAAiB,CAACzB,KAArE;MACD,CAFwD,CAAzD,EAEI;QACF,OAAOiF,eAAe,CAACjF,KAAvB;MACD,CAL4C,CAM7C;;;MACA,OAAO,CAACoE,eAAe,CAAC3C,iBAAiB,CAACzB,KAAnB,CAAhB,EAA2CoF,MAA3C,CAAkDzJ,kBAAkB,CAACsJ,eAAe,CAACjF,KAAjB,CAApE,CAAP;IACD,CARiC,CAAlC;IASA,IAAIqF,sBAAsB,GAAGnI,QAAQ,CAAC,YAAY;MAChD,IAAI,CAACuD,KAAK,CAACvB,UAAX,EAAuB;QACrB,OAAOgG,mBAAmB,CAAClF,KAA3B;MACD;;MACD,OAAOrE,kBAAkB,CAACuJ,mBAAmB,CAAClF,KAArB,CAAlB,CAA8C4E,IAA9C,CAAmD,UAAUC,CAAV,EAAaC,CAAb,EAAgB;QACxE,OAAOrE,KAAK,CAACvB,UAAN,CAAiB2F,CAAjB,EAAoBC,CAApB,CAAP;MACD,CAFM,CAAP;IAGD,CAPoC,CAArC;IAQA,IAAIQ,cAAc,GAAGpI,QAAQ,CAAC,YAAY;MACxC,OAAON,cAAc,CAACyI,sBAAsB,CAACrF,KAAxB,EAA+B;QAClDxB,UAAU,EAAE4C,gBAAgB,CAACpB,KADqB;QAElDkB,cAAc,EAAEA,cAAc,CAAClB;MAFmB,CAA/B,CAArB;IAID,CAL4B,CAA7B,CA3LiC,CAiMjC;;IACA,IAAIuF,aAAa,GAAG,SAASA,aAAT,CAAuBlC,MAAvB,EAA+B;MACjD,IAAImC,aAAa,GAAGzD,mBAAmB,CAACsB,MAAD,CAAvC;MACAH,gBAAgB,CAACsC,aAAD,CAAhB;;MACA,IAAI/E,KAAK,CAACP,QAAN,MACJ;MACAsF,aAAa,CAAC7B,MAAd,KAAyBH,YAAY,CAACxD,KAAb,CAAmB2D,MAA5C,IAAsD6B,aAAa,CAACL,IAAd,CAAmB,UAAUM,MAAV,EAAkBC,KAAlB,EAAyB;QAChG,IAAIC,qBAAJ;;QACA,OAAO,CAAC,CAACA,qBAAqB,GAAGnC,YAAY,CAACxD,KAAb,CAAmB0F,KAAnB,CAAzB,MAAwD,IAAxD,IAAgEC,qBAAqB,KAAK,KAAK,CAA/F,GAAmG,KAAK,CAAxG,GAA4GA,qBAAqB,CAAC3F,KAAnI,OAA+IyF,MAAM,KAAK,IAAX,IAAmBA,MAAM,KAAK,KAAK,CAAnC,GAAuC,KAAK,CAA5C,GAAgDA,MAAM,CAACzF,KAAtM,CAAP;MACD,CAHqD,CAFlD,CAAJ,EAKK;QACH,IAAI4F,YAAY,GAAGnF,KAAK,CAACV,YAAN,GAAqByF,aAAa,CAACtD,GAAd,CAAkB,UAAU2D,CAAV,EAAa;UACrE,OAAO9J,aAAa,CAACA,aAAa,CAAC,EAAD,EAAK8J,CAAL,CAAd,EAAuB,EAAvB,EAA2B;YAC7CC,WAAW,EAAED,CAAC,CAACnD,KAD8B;YAE7CA,KAAK,EAAE,OAAOmD,CAAC,CAACnD,KAAT,KAAmB,UAAnB,GAAgCmD,CAAC,CAACnD,KAAF,EAAhC,GAA4CmD,CAAC,CAACnD;UAFR,CAA3B,CAApB;QAID,CALuC,CAArB,GAKd8C,aAAa,CAACtD,GAAd,CAAkB,UAAU2D,CAAV,EAAa;UAClC,OAAOA,CAAC,CAAC7F,KAAT;QACD,CAFI,CALL;QAQA,IAAI+F,aAAa,GAAGP,aAAa,CAACtD,GAAd,CAAkB,UAAU2D,CAAV,EAAa;UACjD,OAAOhJ,qBAAqB,CAAC4G,cAAc,CAACoC,CAAC,CAAC7F,KAAH,CAAf,CAA5B;QACD,CAFmB,CAApB;QAGAS,KAAK,CAACP,QAAN,EACA;QACAe,QAAQ,CAACjB,KAAT,GAAiB4F,YAAjB,GAAgCA,YAAY,CAAC,CAAD,CAF5C,EAGA;QACA3E,QAAQ,CAACjB,KAAT,GAAiB+F,aAAjB,GAAiCA,aAAa,CAAC,CAAD,CAJ9C;MAKD;IACF,CA1BD,CAlMiC,CA6NjC;;;IACA,IAAIC,SAAS,GAAGrI,QAAQ,CAAC,IAAD,CAAxB;IAAA,IACEsI,UAAU,GAAGpK,cAAc,CAACmK,SAAD,EAAY,CAAZ,CAD7B;IAAA,IAEEE,WAAW,GAAGD,UAAU,CAAC,CAAD,CAF1B;IAAA,IAGEE,cAAc,GAAGF,UAAU,CAAC,CAAD,CAH7B;;IAIA,IAAIG,UAAU,GAAGzI,QAAQ,CAAC,CAAD,CAAzB;IAAA,IACE0I,UAAU,GAAGxK,cAAc,CAACuK,UAAD,EAAa,CAAb,CAD7B;IAAA,IAEEE,kBAAkB,GAAGD,UAAU,CAAC,CAAD,CAFjC;IAAA,IAGEE,qBAAqB,GAAGF,UAAU,CAAC,CAAD,CAHpC;;IAIA,IAAIG,8BAA8B,GAAGtJ,QAAQ,CAAC,YAAY;MACxD,OAAOuD,KAAK,CAAClB,wBAAN,KAAmChB,SAAnC,GAA+CkC,KAAK,CAAClB,wBAArD,GAAgFkB,KAAK,CAACX,IAAN,KAAe,UAAtG;IACD,CAF4C,CAA7C;;IAGA,IAAI2G,aAAa,GAAG,SAASA,aAAT,CAAuBC,MAAvB,EAA+BhB,KAA/B,EAAsC;MACxD,IAAIiB,KAAK,GAAGC,SAAS,CAACjD,MAAV,GAAmB,CAAnB,IAAwBiD,SAAS,CAAC,CAAD,CAAT,KAAiBrI,SAAzC,GAAqDqI,SAAS,CAAC,CAAD,CAA9D,GAAoE,EAAhF;MAAA,IACEC,YAAY,GAAGF,KAAK,CAACG,MADvB;MAAA,IAEEA,MAAM,GAAGD,YAAY,KAAK,KAAK,CAAtB,GAA0B,UAA1B,GAAuCA,YAFlD;;MAGAN,qBAAqB,CAACb,KAAD,CAArB;;MACA,IAAIjF,KAAK,CAACtC,QAAN,IAAkBsC,KAAK,CAACX,IAAN,KAAe,UAAjC,IAA+C4G,MAAM,KAAK,IAA1D,IAAkEI,MAAM,KAAK,UAAjF,EAA6F;QAC3FX,cAAc,CAAClI,MAAM,CAACyI,MAAD,CAAP,CAAd;MACD;IACF,CARD,CAzOiC,CAkPjC;;;IACA,IAAIK,aAAa,GAAG,SAASA,aAAT,CAAuB5E,GAAvB,EAA4B6E,QAA5B,EAAsC;MACxD,IAAIC,YAAY,GAAG,SAASA,YAAT,GAAwB;QACzC,IAAIC,YAAJ;;QACA,IAAIvE,MAAM,GAAGc,cAAc,CAACtB,GAAD,CAA3B;QACA,IAAI2D,WAAW,GAAGnD,MAAM,KAAK,IAAX,IAAmBA,MAAM,KAAK,KAAK,CAAnC,GAAuC,KAAK,CAA5C,GAAgDA,MAAM,CAACvB,gBAAgB,CAACpB,KAAjB,CAAuB0C,KAAxB,CAAxE;QACA,OAAO,CAACjC,KAAK,CAACV,YAAN,GAAqB;UAC3B2C,KAAK,EAAE,OAAOoD,WAAP,KAAuB,UAAvB,GAAoCA,WAAW,EAA/C,GAAoDA,WADhC;UAE3BA,WAAW,EAAEA,WAFc;UAG3B9F,KAAK,EAAEmC,GAHoB;UAI3BM,GAAG,EAAE,CAACyE,YAAY,GAAGvE,MAAM,KAAK,IAAX,IAAmBA,MAAM,KAAK,KAAK,CAAnC,GAAuC,KAAK,CAA5C,GAAgDA,MAAM,CAACF,GAAvE,MAAgF,IAAhF,IAAwFyE,YAAY,KAAK,KAAK,CAA9G,GAAkHA,YAAlH,GAAiI/E;QAJ3G,CAArB,GAKJA,GALG,EAKEtF,qBAAqB,CAAC8F,MAAD,CALvB,CAAP;MAMD,CAVD;;MAWA,IAAIqE,QAAQ,IAAIvG,KAAK,CAAC1B,QAAtB,EAAgC;QAC9B,IAAIoI,aAAa,GAAGF,YAAY,EAAhC;QAAA,IACEG,cAAc,GAAGvL,cAAc,CAACsL,aAAD,EAAgB,CAAhB,CADjC;QAAA,IAEEE,YAAY,GAAGD,cAAc,CAAC,CAAD,CAF/B;QAAA,IAGEzE,MAAM,GAAGyE,cAAc,CAAC,CAAD,CAHzB;;QAIA3G,KAAK,CAAC1B,QAAN,CAAesI,YAAf,EAA6B1E,MAA7B;MACD,CAND,MAMO,IAAI,CAACqE,QAAD,IAAavG,KAAK,CAACzB,UAAvB,EAAmC;QACxC,IAAIsI,cAAc,GAAGL,YAAY,EAAjC;QAAA,IACEM,cAAc,GAAG1L,cAAc,CAACyL,cAAD,EAAiB,CAAjB,CADjC;QAAA,IAEEE,aAAa,GAAGD,cAAc,CAAC,CAAD,CAFhC;QAAA,IAGEE,OAAO,GAAGF,cAAc,CAAC,CAAD,CAH1B;;QAIA9G,KAAK,CAACzB,UAAN,CAAiBwI,aAAjB,EAAgCC,OAAhC;MACD;IACF,CAzBD,CAnPiC,CA6QjC;;;IACA,IAAIC,gBAAgB,GAAG,SAASA,gBAAT,CAA0BvF,GAA1B,EAA+BwF,IAA/B,EAAqC;MAC1D,IAAIC,WAAJ,CAD0D,CAE1D;;MACA,IAAIC,YAAY,GAAG5G,QAAQ,CAACjB,KAAT,GAAiB2H,IAAI,CAACX,QAAtB,GAAiC,IAApD;;MACA,IAAIa,YAAJ,EAAkB;QAChBD,WAAW,GAAG3G,QAAQ,CAACjB,KAAT,GAAiB,GAAGoF,MAAH,CAAUzJ,kBAAkB,CAAC6H,YAAY,CAACxD,KAAd,CAA5B,EAAkD,CAACmC,GAAD,CAAlD,CAAjB,GAA4E,CAACA,GAAD,CAA1F;MACD,CAFD,MAEO;QACLyF,WAAW,GAAGpE,YAAY,CAACxD,KAAb,CAAmB8H,MAAnB,CAA0B,UAAUjC,CAAV,EAAa;UACnD,OAAOA,CAAC,CAAC7F,KAAF,KAAYmC,GAAnB;QACD,CAFa,CAAd;MAGD;;MACDoD,aAAa,CAACqC,WAAD,CAAb;MACAb,aAAa,CAAC5E,GAAD,EAAM0F,YAAN,CAAb,CAZ0D,CAa1D;;MACA,IAAIpH,KAAK,CAACX,IAAN,KAAe,UAAnB,EAA+B;QAC7B;QACAqG,cAAc,CAAC,EAAD,CAAd;MACD,CAHD,MAGO,IAAI,CAAClF,QAAQ,CAACjB,KAAV,IAAmBS,KAAK,CAAC3B,oBAA7B,EAAmD;QACxD4C,cAAc,CAAC,EAAD,CAAd;QACAyE,cAAc,CAAC,EAAD,CAAd;MACD;IACF,CArBD,CA9QiC,CAoSjC;IACA;;;IACA,IAAI4B,qBAAqB,GAAG,SAASA,qBAAT,CAA+BC,UAA/B,EAA2CL,IAA3C,EAAiD;MAC3EpC,aAAa,CAACyC,UAAD,CAAb;;MACA,IAAIL,IAAI,CAACvJ,IAAL,KAAc,QAAd,IAA0BuJ,IAAI,CAACvJ,IAAL,KAAc,OAA5C,EAAqD;QACnDuJ,IAAI,CAACtE,MAAL,CAAY0B,OAAZ,CAAoB,UAAUlB,IAAV,EAAgB;UAClCkD,aAAa,CAAClD,IAAI,CAAC7D,KAAN,EAAa,KAAb,CAAb;QACD,CAFD;MAGD;IACF,CAPD,CAtSiC,CA8SjC;;;IACA,IAAIiI,gBAAgB,GAAG,SAASA,gBAAT,CAA0BC,UAA1B,EAAsCP,IAAtC,EAA4C;MACjEjG,cAAc,CAACwG,UAAD,CAAd;MACA/B,cAAc,CAAC,IAAD,CAAd,CAFiE,CAGjE;;MACA,IAAIwB,IAAI,CAACb,MAAL,KAAgB,QAApB,EAA8B;QAC5B,IAAIqB,SAAS,GAAG,CAACD,UAAU,IAAI,EAAf,EAAmBE,IAAnB,EAAhB,CAD4B,CAE5B;;QACA,IAAID,SAAJ,EAAe;UACb,IAAIE,YAAY,GAAG/I,KAAK,CAACgJ,IAAN,CAAW,IAAItE,GAAJ,CAAQ,GAAGoB,MAAH,CAAUzJ,kBAAkB,CAACoI,SAAS,CAAC/D,KAAX,CAA5B,EAA+C,CAACmI,SAAD,CAA/C,CAAR,CAAX,CAAnB;UACA5C,aAAa,CAAC8C,YAAD,CAAb;UACAtB,aAAa,CAACoB,SAAD,EAAY,IAAZ,CAAb;UACAzG,cAAc,CAAC,EAAD,CAAd;QACD;;QACD;MACD;;MACD,IAAIiG,IAAI,CAACb,MAAL,KAAgB,MAApB,EAA4B;QAC1B,IAAIyB,eAAJ;;QACA,IAAI9H,KAAK,CAACX,IAAN,KAAe,UAAnB,EAA+B;UAC7ByF,aAAa,CAAC2C,UAAD,CAAb;QACD;;QACD,CAACK,eAAe,GAAG9H,KAAK,CAAC7B,QAAzB,MAAuC,IAAvC,IAA+C2J,eAAe,KAAK,KAAK,CAAxE,GAA4E,KAAK,CAAjF,GAAqFA,eAAe,CAACC,IAAhB,CAAqB/H,KAArB,EAA4ByH,UAA5B,CAArF;MACD;IACF,CAtBD;;IAuBA,IAAIO,qBAAqB,GAAG,SAASA,qBAAT,CAA+BC,KAA/B,EAAsC;MAChE,IAAIC,WAAW,GAAGD,KAAlB;;MACA,IAAIjI,KAAK,CAACX,IAAN,KAAe,MAAnB,EAA2B;QACzB6I,WAAW,GAAGD,KAAK,CAACxG,GAAN,CAAU,UAAU0G,IAAV,EAAgB;UACtC,IAAIC,GAAG,GAAGhH,YAAY,CAAC7B,KAAb,CAAmB4C,GAAnB,CAAuBgG,IAAvB,CAAV;UACA,OAAOC,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAK,KAAK,CAA7B,GAAiC,KAAK,CAAtC,GAA0CA,GAAG,CAAC7I,KAArD;QACD,CAHa,EAGX8H,MAHW,CAGJ,UAAU3F,GAAV,EAAe;UACvB,OAAOA,GAAG,KAAK5D,SAAf;QACD,CALa,CAAd;MAMD;;MACD,IAAI8J,YAAY,GAAG/I,KAAK,CAACgJ,IAAN,CAAW,IAAItE,GAAJ,CAAQ,GAAGoB,MAAH,CAAUzJ,kBAAkB,CAACoI,SAAS,CAAC/D,KAAX,CAA5B,EAA+CrE,kBAAkB,CAACgN,WAAD,CAAjE,CAAR,CAAX,CAAnB;MACApD,aAAa,CAAC8C,YAAD,CAAb;MACAA,YAAY,CAACtD,OAAb,CAAqB,UAAU+D,WAAV,EAAuB;QAC1C/B,aAAa,CAAC+B,WAAD,EAAc,IAAd,CAAb;MACD,CAFD;IAGD,CAfD;;IAgBA,IAAIC,WAAW,GAAG7L,QAAQ,CAAC,YAAY;MACrC,OAAOuD,KAAK,CAACjB,OAAN,KAAkB,KAAlB,IAA2BiB,KAAK,CAACC,wBAAN,KAAmC,KAArE;IACD,CAFyB,CAA1B;IAGAjE,qBAAqB,CAACmB,UAAU,CAAC7B,aAAa,CAACA,aAAa,CAAC,EAAD,EAAK4F,aAAL,CAAd,EAAmC,EAAnC,EAAuC;MACnF/E,cAAc,EAAE0I,cADmE;MAEnFmB,aAAa,EAAEA,aAFoE;MAGnFlH,wBAAwB,EAAEiH,8BAHyD;MAInFzH,QAAQ,EAAE2I,gBAJyE;MAKnF9H,oBAAoB,EAAEtC,KAAK,CAACmD,KAAD,EAAQ,sBAAR,CALwD;MAMnFsD,SAAS,EAAEA,SANwE;MAOnFvF,UAAU,EAAE4C,gBAPuE;MAQnF5B,OAAO,EAAEuJ,WAR0E;MASnFtJ,UAAU,EAAEnC,KAAK,CAACmD,KAAD,EAAQ,YAAR,CATkE;MAUnFd,cAAc,EAAErC,KAAK,CAACmD,KAAD,EAAQ,gBAAR,CAV8D;MAWnFS,cAAc,EAAEA;IAXmE,CAAvC,CAAd,CAAX,CAArB,CAzViC,CAsWjC;;IACA,IAAI8H,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;MACzC3L,WAAW,CAAC,YAAY;QACtBT,YAAY,CAAC2D,KAAD,CAAZ;MACD,CAFU,EAER;QACD0D,KAAK,EAAE;MADN,CAFQ,CAAX;IAKD;;IACD,IAAIgF,SAAS,GAAG/L,GAAG,EAAnB;IACAyD,MAAM,CAAC;MACLuI,KAAK,EAAE,SAASA,KAAT,GAAiB;QACtB,IAAIC,gBAAJ;;QACA,CAACA,gBAAgB,GAAGF,SAAS,CAACnJ,KAA9B,MAAyC,IAAzC,IAAiDqJ,gBAAgB,KAAK,KAAK,CAA3E,GAA+E,KAAK,CAApF,GAAwFA,gBAAgB,CAACD,KAAjB,EAAxF;MACD,CAJI;MAKLE,IAAI,EAAE,SAASA,IAAT,GAAgB;QACpB,IAAIC,iBAAJ;;QACA,CAACA,iBAAiB,GAAGJ,SAAS,CAACnJ,KAA/B,MAA0C,IAA1C,IAAkDuJ,iBAAiB,KAAK,KAAK,CAA7E,GAAiF,KAAK,CAAtF,GAA0FA,iBAAiB,CAACD,IAAlB,EAA1F;MACD,CARI;MASLE,QAAQ,EAAE,SAASA,QAAT,CAAkBC,GAAlB,EAAuB;QAC/B,IAAIC,iBAAJ;;QACA,CAACA,iBAAiB,GAAGP,SAAS,CAACnJ,KAA/B,MAA0C,IAA1C,IAAkD0J,iBAAiB,KAAK,KAAK,CAA7E,GAAiF,KAAK,CAAtF,GAA0FA,iBAAiB,CAACF,QAAlB,CAA2BC,GAA3B,CAA1F;MACD;IAZI,CAAD,CAAN;IAcA,IAAIE,SAAS,GAAGzM,QAAQ,CAAC,YAAY;MACnC,OAAOW,IAAI,CAAC4C,KAAD,EAAQ,CAAC,IAAD,EAAO,MAAP,EAAe,WAAf,EAA4B,UAA5B,EAAwC,YAAxC,EACnB;MACA,YAFmB,EAEL,aAFK,EAEU,UAFV,EAEsB,sBAFtB,EAGnB;MACA,UAJmB,EAIP,YAJO,EAIO,0BAJP,EAKnB;MACA,cANmB,EAMH,YANG,EAMW,kBANX,EAM+B,iBAN/B,EAMkD,SANlD,EAM6D,UAN7D,EAMyE,0BANzE,EAMqG,sBANrG,EAM6H,SAN7H,EAMwI,YANxI,EAMsJ,gBANtJ,EAOnB;MACA,OARmB,EAQV,cARU,EAQM,cARN,EAQsB,UARtB,CAAR,CAAX;IASD,CAVuB,CAAxB;IAWA,OAAO,YAAY;MACjB,OAAOxE,YAAY,CAACG,UAAD,EAAaL,aAAa,CAACA,aAAa,CAACA,aAAa,CAAC,EAAD,EAAK4N,SAAS,CAAC3J,KAAf,CAAd,EAAqCc,KAArC,CAAd,EAA2D,EAA3D,EAA+D;QAC1G,MAAME,QADoG;QAE1G,aAAaP,KAAK,CAACzC,SAFuF;QAG1G,OAAOmL,SAHmG;QAI1G,gBAAgBrL,cAJ0F;QAK1G,QAAQ2C,KAAK,CAACX,IAL4F;QAM1G,iBAAiB4D,aAAa,CAAC1D,KAN2E;QAO1G,yBAAyB+H,qBAPiF;QAQ1G,eAAetG,iBAAiB,CAACzB,KARyE;QAS1G,YAAYiI,gBAT8F;QAU1G,iBAAiBQ,qBAVyF;QAW1G,4BAA4BhI,KAAK,CAACC,wBAXwE;QAY1G,cAAcnE,UAZ4F;QAa1G,gBAAgB,CAAC+I,cAAc,CAACtF,KAAf,CAAqB2D,MAboE;QAc1G,eAAeuC,WAAW,CAAClG,KAd+E;QAe1G,sBAAsB,GAAGoF,MAAH,CAAUpE,QAAV,EAAoB,QAApB,EAA8BoE,MAA9B,CAAqCkB,kBAAkB,CAACtG,KAAxD;MAfoF,CAA/D,CAA1B,EAgBfe,KAhBe,CAAnB;IAiBD,CAlBD;EAmBD;AAxa4B,CAAD,CAA9B"},"metadata":{},"sourceType":"module"}