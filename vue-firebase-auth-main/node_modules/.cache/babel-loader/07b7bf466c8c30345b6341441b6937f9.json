{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { onBeforeUnmount, ref, watch, onMounted } from 'vue';\nimport raf from '../../_util/raf';\nvar StatusQueue = ['measure', 'align', null, 'motion'];\nexport default (function (visible, doMeasure) {\n  var status = ref(null);\n  var rafRef = ref();\n  var destroyRef = ref(false);\n\n  function setStatus(nextStatus) {\n    if (!destroyRef.value) {\n      status.value = nextStatus;\n    }\n  }\n\n  function cancelRaf() {\n    raf.cancel(rafRef.value);\n  }\n\n  function goNextStatus(callback) {\n    cancelRaf();\n    rafRef.value = raf(function () {\n      // Only align should be manually trigger\n      var newStatus = status.value;\n\n      switch (status.value) {\n        case 'align':\n          newStatus = 'motion';\n          break;\n\n        case 'motion':\n          newStatus = 'stable';\n          break;\n\n        default:\n      }\n\n      setStatus(newStatus);\n      callback === null || callback === void 0 ? void 0 : callback();\n    });\n  }\n\n  watch(visible, function () {\n    setStatus('measure');\n  }, {\n    immediate: true,\n    flush: 'post'\n  });\n  onMounted(function () {\n    // Go next status\n    watch(status, function () {\n      switch (status.value) {\n        case 'measure':\n          doMeasure();\n          break;\n\n        default:\n      }\n\n      if (status.value) {\n        rafRef.value = raf( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n          var index, nextStatus;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  index = StatusQueue.indexOf(status.value);\n                  nextStatus = StatusQueue[index + 1];\n\n                  if (nextStatus && index !== -1) {\n                    setStatus(nextStatus);\n                  }\n\n                case 3:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        })));\n      }\n    }, {\n      immediate: true,\n      flush: 'post'\n    });\n  });\n  onBeforeUnmount(function () {\n    destroyRef.value = true;\n    cancelRaf();\n  });\n  return [status, goNextStatus];\n});","map":{"version":3,"names":["_asyncToGenerator","_regeneratorRuntime","onBeforeUnmount","ref","watch","onMounted","raf","StatusQueue","visible","doMeasure","status","rafRef","destroyRef","setStatus","nextStatus","value","cancelRaf","cancel","goNextStatus","callback","newStatus","immediate","flush","mark","_callee","index","wrap","_callee$","_context","prev","next","indexOf","stop"],"sources":["/Users/jasonti/Desktop/Tripper/vue/node_modules/ant-design-vue/es/vc-trigger/Popup/useVisibleStatus.js"],"sourcesContent":["import _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { onBeforeUnmount, ref, watch, onMounted } from 'vue';\nimport raf from '../../_util/raf';\nvar StatusQueue = ['measure', 'align', null, 'motion'];\nexport default (function (visible, doMeasure) {\n  var status = ref(null);\n  var rafRef = ref();\n  var destroyRef = ref(false);\n  function setStatus(nextStatus) {\n    if (!destroyRef.value) {\n      status.value = nextStatus;\n    }\n  }\n  function cancelRaf() {\n    raf.cancel(rafRef.value);\n  }\n  function goNextStatus(callback) {\n    cancelRaf();\n    rafRef.value = raf(function () {\n      // Only align should be manually trigger\n      var newStatus = status.value;\n      switch (status.value) {\n        case 'align':\n          newStatus = 'motion';\n          break;\n        case 'motion':\n          newStatus = 'stable';\n          break;\n        default:\n      }\n      setStatus(newStatus);\n      callback === null || callback === void 0 ? void 0 : callback();\n    });\n  }\n  watch(visible, function () {\n    setStatus('measure');\n  }, {\n    immediate: true,\n    flush: 'post'\n  });\n  onMounted(function () {\n    // Go next status\n    watch(status, function () {\n      switch (status.value) {\n        case 'measure':\n          doMeasure();\n          break;\n        default:\n      }\n      if (status.value) {\n        rafRef.value = raf( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n          var index, nextStatus;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  index = StatusQueue.indexOf(status.value);\n                  nextStatus = StatusQueue[index + 1];\n                  if (nextStatus && index !== -1) {\n                    setStatus(nextStatus);\n                  }\n                case 3:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        })));\n      }\n    }, {\n      immediate: true,\n      flush: 'post'\n    });\n  });\n  onBeforeUnmount(function () {\n    destroyRef.value = true;\n    cancelRaf();\n  });\n  return [status, goNextStatus];\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}